<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>libpysal.graph.Graph &#8212; libpysal v4.14.1 Manual</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=9afac83c" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pysal-styles.css?v=38b0ce36" />
    <script src="../_static/documentation_options.js?v=2aa3d6d4"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"TeX": {"equationNumbers": {"autoNumber": "AMS", "useLabelIds": true}}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="icon" href="../_static/pysal_favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="libpysal.graph.GraphSummary" href="libpysal.graph.GraphSummary.html" />
    <link rel="prev" title="libpysal API reference" href="../api.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          libpysal</a>
        <span class="navbar-text navbar-version pull-left"><b>4.14.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../installation.html">Installation</a></li>
                <li><a href="../user-guide/intro.html">User Guide</a></li>
                <li><a href="../api.html">API</a></li>
                <li><a href="../references.html">References</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#installing-released-version">Installing released version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#installing-development-version">Installing development version</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../api.html#spatial-graph">Spatial Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#spatial-weights">Spatial Weights</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#cg-computational-geometry">cg: Computational Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#io">io</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#kernels">kernels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#examples">examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/intro.html">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/data/examples.html">Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/weights/intro.html">Weights</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/graph/intro.html">Graphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/kernels.html">Kernels</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">W to Graph Member Comparisions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../migration.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../migration.html#members-common-to-w-and-graph">Members common to W and Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../migration.html#members-common-to-w-and-graph-with-different-types">Members common to W and Graph with different types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../migration.html#members-unique-to-w">Members unique to W</a></li>
<li class="toctree-l2"><a class="reference internal" href="../migration.html#members-unique-to-graph">Members unique to Graph</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">libpysal.graph.Graph</a><ul>
<li><a class="reference internal" href="#libpysal.graph.Graph"><code class="docutils literal notranslate"><span class="pre">Graph</span></code></a><ul>
<li><a class="reference internal" href="#libpysal.graph.Graph.__init__"><code class="docutils literal notranslate"><span class="pre">Graph.__init__()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.adjacency"><code class="docutils literal notranslate"><span class="pre">Graph.adjacency</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.aggregate"><code class="docutils literal notranslate"><span class="pre">Graph.aggregate()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.apply"><code class="docutils literal notranslate"><span class="pre">Graph.apply()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.assign_self_weight"><code class="docutils literal notranslate"><span class="pre">Graph.assign_self_weight()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.asymmetry"><code class="docutils literal notranslate"><span class="pre">Graph.asymmetry()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.build_block_contiguity"><code class="docutils literal notranslate"><span class="pre">Graph.build_block_contiguity()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.build_contiguity"><code class="docutils literal notranslate"><span class="pre">Graph.build_contiguity()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.build_distance_band"><code class="docutils literal notranslate"><span class="pre">Graph.build_distance_band()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.build_fuzzy_contiguity"><code class="docutils literal notranslate"><span class="pre">Graph.build_fuzzy_contiguity()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.build_h3"><code class="docutils literal notranslate"><span class="pre">Graph.build_h3()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.build_kernel"><code class="docutils literal notranslate"><span class="pre">Graph.build_kernel()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.build_knn"><code class="docutils literal notranslate"><span class="pre">Graph.build_knn()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.build_raster_contiguity"><code class="docutils literal notranslate"><span class="pre">Graph.build_raster_contiguity()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.build_spatial_matches"><code class="docutils literal notranslate"><span class="pre">Graph.build_spatial_matches()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.build_travel_cost"><code class="docutils literal notranslate"><span class="pre">Graph.build_travel_cost()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.build_triangulation"><code class="docutils literal notranslate"><span class="pre">Graph.build_triangulation()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.cardinalities"><code class="docutils literal notranslate"><span class="pre">Graph.cardinalities</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.component_labels"><code class="docutils literal notranslate"><span class="pre">Graph.component_labels</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.copy"><code class="docutils literal notranslate"><span class="pre">Graph.copy()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.describe"><code class="docutils literal notranslate"><span class="pre">Graph.describe()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.eliminate_zeros"><code class="docutils literal notranslate"><span class="pre">Graph.eliminate_zeros()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.explore"><code class="docutils literal notranslate"><span class="pre">Graph.explore()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.from_W"><code class="docutils literal notranslate"><span class="pre">Graph.from_W()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.from_adjacency"><code class="docutils literal notranslate"><span class="pre">Graph.from_adjacency()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.from_arrays"><code class="docutils literal notranslate"><span class="pre">Graph.from_arrays()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.from_dicts"><code class="docutils literal notranslate"><span class="pre">Graph.from_dicts()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.from_sparse"><code class="docutils literal notranslate"><span class="pre">Graph.from_sparse()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.from_weights_dict"><code class="docutils literal notranslate"><span class="pre">Graph.from_weights_dict()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.generate_da"><code class="docutils literal notranslate"><span class="pre">Graph.generate_da()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.higher_order"><code class="docutils literal notranslate"><span class="pre">Graph.higher_order()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.index_pairs"><code class="docutils literal notranslate"><span class="pre">Graph.index_pairs</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.isolates"><code class="docutils literal notranslate"><span class="pre">Graph.isolates</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.lag"><code class="docutils literal notranslate"><span class="pre">Graph.lag()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.n"><code class="docutils literal notranslate"><span class="pre">Graph.n</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.n_components"><code class="docutils literal notranslate"><span class="pre">Graph.n_components</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.n_edges"><code class="docutils literal notranslate"><span class="pre">Graph.n_edges</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.n_nodes"><code class="docutils literal notranslate"><span class="pre">Graph.n_nodes</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.neighbors"><code class="docutils literal notranslate"><span class="pre">Graph.neighbors</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.nonzero"><code class="docutils literal notranslate"><span class="pre">Graph.nonzero</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.pct_nonzero"><code class="docutils literal notranslate"><span class="pre">Graph.pct_nonzero</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.plot"><code class="docutils literal notranslate"><span class="pre">Graph.plot()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.sparse"><code class="docutils literal notranslate"><span class="pre">Graph.sparse</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.subgraph"><code class="docutils literal notranslate"><span class="pre">Graph.subgraph()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.summary"><code class="docutils literal notranslate"><span class="pre">Graph.summary()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.to_W"><code class="docutils literal notranslate"><span class="pre">Graph.to_W()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.to_gal"><code class="docutils literal notranslate"><span class="pre">Graph.to_gal()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.to_gwt"><code class="docutils literal notranslate"><span class="pre">Graph.to_gwt()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.to_networkx"><code class="docutils literal notranslate"><span class="pre">Graph.to_networkx()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.to_parquet"><code class="docutils literal notranslate"><span class="pre">Graph.to_parquet()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.transform"><code class="docutils literal notranslate"><span class="pre">Graph.transform()</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.unique_ids"><code class="docutils literal notranslate"><span class="pre">Graph.unique_ids</span></code></a></li>
<li><a class="reference internal" href="#libpysal.graph.Graph.weights"><code class="docutils literal notranslate"><span class="pre">Graph.weights</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="libpysal-graph-graph">
<h1>libpysal.graph.Graph<a class="headerlink" href="#libpysal-graph-graph" title="Link to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="libpysal.graph.Graph">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">libpysal.graph.</span></span><span class="sig-name descname"><span class="pre">Graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">adjacency</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'O'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_sorted</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph" title="Link to this definition">¶</a></dt>
<dd><p>Graph class encoding spatial weights matrices</p>
<p>The <a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code></a> is currently experimental
and its API is incomplete and unstable.</p>
<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">adjacency</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'O'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_sorted</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Weights base class based on adjacency list</p>
<p>It is recommenced to use one of the <code class="docutils literal notranslate"><span class="pre">from_*</span></code> or <code class="docutils literal notranslate"><span class="pre">build_*</span></code> constructors
rather than invoking <code class="docutils literal notranslate"><span class="pre">__init__</span></code> directly.</p>
<p>Each observation needs to be present in the focal,
at least as a self-loop with a weight 0.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>adjacency</strong><span class="classifier"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html#pandas.Series" title="(in pandas v2.3.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.Series</span></code></a></span></dt><dd><p>A MultiIndexed pandas.Series with <code class="docutils literal notranslate"><span class="pre">&quot;focal&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;neigbor&quot;</span></code> levels
encoding adjacency, and values encoding weights. By convention,
isolates are encoded as self-loops with a weight 0.</p>
</dd>
<dt><strong>transformation</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">default</span></code> “O”</span></dt><dd><p>weights transformation used to produce the table.</p>
<ul class="simple">
<li><p><strong>O</strong> – Original</p></li>
<li><p><strong>B</strong> – Binary</p></li>
<li><p><strong>R</strong> – Row-standardization (global sum <span class="math notranslate nohighlight">\(=n\)</span>)</p></li>
<li><p><strong>D</strong> – Double-standardization (global sum <span class="math notranslate nohighlight">\(=1\)</span>)</p></li>
<li><p><strong>V</strong> – Variance stabilizing</p></li>
<li><p><strong>C</strong> – Custom</p></li>
</ul>
</dd>
<dt><strong>is_sorted</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">default</span></code> <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#False" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">False</span></code></a></span></dt><dd><p><code class="docutils literal notranslate"><span class="pre">adjacency</span></code> capturing the graph needs to be canonically sorted to
initialize the class. The MultiIndex needs to be ordered i–&gt;j
on both focal and neighbor levels according to the order of ids in the
original data from which the Graph is created. Sorting is performed by
default based on the order of unique values in the focal level. Sorting
needs to be reflected in both the values of the MultiIndex and also the
underlying MultiIndex.codes. Set <code class="docutils literal notranslate"><span class="pre">is_sorted=True</span></code> to skip this step if the
adjacency is already canonically sorted and you are certain about it.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.__init__" title="libpysal.graph.Graph.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>(adjacency[, transformation, is_sorted])</p></td>
<td><p>Weights base class based on adjacency list</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.aggregate" title="libpysal.graph.Graph.aggregate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aggregate</span></code></a>(func)</p></td>
<td><p>Aggregate weights within a neighbor set</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.apply" title="libpysal.graph.Graph.apply"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply</span></code></a>(y, func, **kwargs)</p></td>
<td><p>Apply a reduction across the neighbor sets</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.assign_self_weight" title="libpysal.graph.Graph.assign_self_weight"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assign_self_weight</span></code></a>([weight])</p></td>
<td><p>Assign values to edges representing self-weight.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.asymmetry" title="libpysal.graph.Graph.asymmetry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asymmetry</span></code></a>([intrinsic])</p></td>
<td><p>Asymmetry check.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.build_block_contiguity" title="libpysal.graph.Graph.build_block_contiguity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_block_contiguity</span></code></a>(regimes)</p></td>
<td><p>Generate Graph from block contiguity (regime neighbors)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.build_contiguity" title="libpysal.graph.Graph.build_contiguity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_contiguity</span></code></a>(geometry[, rook, ...])</p></td>
<td><p>Generate Graph from geometry based on contiguity</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.build_distance_band" title="libpysal.graph.Graph.build_distance_band"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_distance_band</span></code></a>(data, threshold[, ...])</p></td>
<td><p>Generate Graph from geometry based on a distance band</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.build_fuzzy_contiguity" title="libpysal.graph.Graph.build_fuzzy_contiguity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_fuzzy_contiguity</span></code></a>(geometry[, ...])</p></td>
<td><p>Generate Graph from fuzzy contiguity</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.build_h3" title="libpysal.graph.Graph.build_h3"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_h3</span></code></a>(ids[, order, weight])</p></td>
<td><p>Generate Graph from indices of H3 hexagons.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.build_kernel" title="libpysal.graph.Graph.build_kernel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_kernel</span></code></a>(data[, kernel, k, bandwidth, ...])</p></td>
<td><p>Generate Graph from geometry data based on a kernel function</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.build_knn" title="libpysal.graph.Graph.build_knn"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_knn</span></code></a>(data, k[, metric, p, coplanar, ...])</p></td>
<td><p>Generate Graph from geometry data based on k-nearest neighbors search</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.build_raster_contiguity" title="libpysal.graph.Graph.build_raster_contiguity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_raster_contiguity</span></code></a>(da[, rook, z_value, ...])</p></td>
<td><p>Generate Graph from <code class="docutils literal notranslate"><span class="pre">xarray.DataArray</span></code> raster object</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.build_spatial_matches" title="libpysal.graph.Graph.build_spatial_matches"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_spatial_matches</span></code></a>(data, k[, metric, ...])</p></td>
<td><p>Match locations in one dataset to at least <cite>n_matches</cite> locations in another (possibly identical) dataset by minimizing the total distance between matched locations.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.build_travel_cost" title="libpysal.graph.Graph.build_travel_cost"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_travel_cost</span></code></a>(df, network, threshold[, ...])</p></td>
<td><p>Generate a Graph based on shortest travel costs from a pandana.Network</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.build_triangulation" title="libpysal.graph.Graph.build_triangulation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_triangulation</span></code></a>(data[, method, ...])</p></td>
<td><p>Generate Graph from geometry based on triangulation</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.copy" title="libpysal.graph.Graph.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy</span></code></a>([deep])</p></td>
<td><p>Make a copy of this Graph's adjacency table and transformation</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.describe" title="libpysal.graph.Graph.describe"><code class="xref py py-obj docutils literal notranslate"><span class="pre">describe</span></code></a>(y[, q, statistics])</p></td>
<td><p>Describe the distribution of <code class="docutils literal notranslate"><span class="pre">y</span></code> values within the neighbors of each node.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">difference</span></code>(right)</p></td>
<td><p>Provide the set difference between the graph on the left and the graph on the right.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.eliminate_zeros" title="libpysal.graph.Graph.eliminate_zeros"><code class="xref py py-obj docutils literal notranslate"><span class="pre">eliminate_zeros</span></code></a>()</p></td>
<td><p>Remove graph edges with zero weight</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">equals</span></code>(right)</p></td>
<td><p>Check that two graphs are identical.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.explore" title="libpysal.graph.Graph.explore"><code class="xref py py-obj docutils literal notranslate"><span class="pre">explore</span></code></a>(gdf[, focal, nodes, color, ...])</p></td>
<td><p>Plot graph as an interactive Folium Map</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.from_W" title="libpysal.graph.Graph.from_W"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_W</span></code></a>(w)</p></td>
<td><p>Create an experimental Graph from libpysal.weights.W object</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.from_adjacency" title="libpysal.graph.Graph.from_adjacency"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_adjacency</span></code></a>(adjacency[, focal_col, ...])</p></td>
<td><p>Create a Graph from a pandas DataFrame formatted as an adjacency list</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.from_arrays" title="libpysal.graph.Graph.from_arrays"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_arrays</span></code></a>(focal_ids, neighbor_ids, weight, ...)</p></td>
<td><p>Generate Graph from arrays of indices and weights of the same length</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.from_dicts" title="libpysal.graph.Graph.from_dicts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_dicts</span></code></a>(neighbors[, weights])</p></td>
<td><p>Generate Graph from dictionaries of neighbors and weights</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.from_sparse" title="libpysal.graph.Graph.from_sparse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_sparse</span></code></a>(sparse[, ids])</p></td>
<td><p>Convert a <code class="docutils literal notranslate"><span class="pre">scipy.sparse</span></code> array to a PySAL <code class="docutils literal notranslate"><span class="pre">Graph</span></code> object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.from_weights_dict" title="libpysal.graph.Graph.from_weights_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_weights_dict</span></code></a>(weights_dict)</p></td>
<td><p>Generate Graph from a dict of dicts</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.generate_da" title="libpysal.graph.Graph.generate_da"><code class="xref py py-obj docutils literal notranslate"><span class="pre">generate_da</span></code></a>(y)</p></td>
<td><p>Creates xarray.DataArray object from passed data aligned with the Graph.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.higher_order" title="libpysal.graph.Graph.higher_order"><code class="xref py py-obj docutils literal notranslate"><span class="pre">higher_order</span></code></a>([k, shortest_path, diagonal, ...])</p></td>
<td><p>Contiguity weights object of order <span class="math notranslate nohighlight">\(k\)</span>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">intersection</span></code>(right)</p></td>
<td><p>Returns a binary Graph, that includes only those neighbor pairs that exist in both left and right.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">intersects</span></code>(right)</p></td>
<td><p>Returns True if left and right share at least one link, irrespective of weights value.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">isomorphic</span></code>(right)</p></td>
<td><p>Check that two graphs are isomorphic.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">issubgraph</span></code>(right)</p></td>
<td><p>Return True if every link in the left Graph also occurs in the right Graph.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.lag" title="libpysal.graph.Graph.lag"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lag</span></code></a>(y[, categorical, ties])</p></td>
<td><p>Spatial lag operator</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.plot" title="libpysal.graph.Graph.plot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot</span></code></a>(gdf[, focal, nodes, color, edge_kws, ...])</p></td>
<td><p>Plot edges and nodes of the Graph</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.subgraph" title="libpysal.graph.Graph.subgraph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subgraph</span></code></a>(ids)</p></td>
<td><p>Returns a subset of Graph containing only nodes specified in ids</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.summary" title="libpysal.graph.Graph.summary"><code class="xref py py-obj docutils literal notranslate"><span class="pre">summary</span></code></a>([asymmetries])</p></td>
<td><p>Summary of the Graph properties</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">symmetric_difference</span></code>(right)</p></td>
<td><p>Filter out links that are in both left and right Graph objects.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.to_W" title="libpysal.graph.Graph.to_W"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_W</span></code></a>()</p></td>
<td><p>Convert Graph to a libpysal.weights.W object</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.to_gal" title="libpysal.graph.Graph.to_gal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_gal</span></code></a>(path)</p></td>
<td><p>Save Graph to a GAL file</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.to_gwt" title="libpysal.graph.Graph.to_gwt"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_gwt</span></code></a>(path)</p></td>
<td><p>Save Graph to a GWT file</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.to_networkx" title="libpysal.graph.Graph.to_networkx"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_networkx</span></code></a>()</p></td>
<td><p>Convert Graph to a <code class="docutils literal notranslate"><span class="pre">networkx</span></code> graph.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.to_parquet" title="libpysal.graph.Graph.to_parquet"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_parquet</span></code></a>(path, **kwargs)</p></td>
<td><p>Save Graph to a Apache Parquet</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.transform" title="libpysal.graph.Graph.transform"><code class="xref py py-obj docutils literal notranslate"><span class="pre">transform</span></code></a>(transformation)</p></td>
<td><p>Transformation of weights</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">union</span></code>(right)</p></td>
<td><p>Provide the union of two Graph objects, collecing all links that are in either graph.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.adjacency" title="libpysal.graph.Graph.adjacency"><code class="xref py py-obj docutils literal notranslate"><span class="pre">adjacency</span></code></a></p></td>
<td><p>Return a copy of the adjacency list</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.cardinalities" title="libpysal.graph.Graph.cardinalities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cardinalities</span></code></a></p></td>
<td><p>Number of neighbors for each observation</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.component_labels" title="libpysal.graph.Graph.component_labels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">component_labels</span></code></a></p></td>
<td><p>Get component labels per observation</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.index_pairs" title="libpysal.graph.Graph.index_pairs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">index_pairs</span></code></a></p></td>
<td><p>Return focal-neighbor index pairs</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.isolates" title="libpysal.graph.Graph.isolates"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isolates</span></code></a></p></td>
<td><p>Index of observations with no neighbors</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.n" title="libpysal.graph.Graph.n"><code class="xref py py-obj docutils literal notranslate"><span class="pre">n</span></code></a></p></td>
<td><p>Number of observations.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.n_components" title="libpysal.graph.Graph.n_components"><code class="xref py py-obj docutils literal notranslate"><span class="pre">n_components</span></code></a></p></td>
<td><p>Get a number of connected components</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.n_edges" title="libpysal.graph.Graph.n_edges"><code class="xref py py-obj docutils literal notranslate"><span class="pre">n_edges</span></code></a></p></td>
<td><p>Number of edges.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.n_nodes" title="libpysal.graph.Graph.n_nodes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">n_nodes</span></code></a></p></td>
<td><p>Number of nodes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.neighbors" title="libpysal.graph.Graph.neighbors"><code class="xref py py-obj docutils literal notranslate"><span class="pre">neighbors</span></code></a></p></td>
<td><p>Get neighbors dictionary</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.nonzero" title="libpysal.graph.Graph.nonzero"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nonzero</span></code></a></p></td>
<td><p>Number of nonzero weights.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.pct_nonzero" title="libpysal.graph.Graph.pct_nonzero"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pct_nonzero</span></code></a></p></td>
<td><p>Percentage of nonzero weights.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.sparse" title="libpysal.graph.Graph.sparse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sparse</span></code></a></p></td>
<td><p>Return a scipy.sparse array (CSR)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#libpysal.graph.Graph.unique_ids" title="libpysal.graph.Graph.unique_ids"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unique_ids</span></code></a></p></td>
<td><p>Unique IDs used in the Graph</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#libpysal.graph.Graph.weights" title="libpysal.graph.Graph.weights"><code class="xref py py-obj docutils literal notranslate"><span class="pre">weights</span></code></a></p></td>
<td><p>Get weights dictionary</p></td>
</tr>
</tbody>
</table>
<dl class="py property">
<dt class="sig sig-object py" id="libpysal.graph.Graph.adjacency">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">adjacency</span></span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.adjacency"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.adjacency" title="Link to this definition">¶</a></dt>
<dd><p>Return a copy of the adjacency list</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html#pandas.Series" title="(in pandas v2.3.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.Series</span></code></a></dt><dd><p>Underlying adjacency list</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.aggregate">
<span class="sig-name descname"><span class="pre">aggregate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.aggregate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.aggregate" title="Link to this definition">¶</a></dt>
<dd><p>Aggregate weights within a neighbor set</p>
<p>Apply a custom aggregation function to a group of weights of the same focal
geometry.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>func</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#callable" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">callable()</span></code></a></span></dt><dd><p>A callable accepted by pandas <code class="docutils literal notranslate"><span class="pre">groupby.agg</span></code> method</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">pd.Series</span></code></dt><dd><p>Aggregated weights</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.apply" title="Link to this definition">¶</a></dt>
<dd><p>Apply a reduction across the neighbor sets</p>
<p>Applies <code class="docutils literal notranslate"><span class="pre">func</span></code> over groups of <code class="docutils literal notranslate"><span class="pre">y</span></code> defined by neighbors for each focal.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>y</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/glossary.html#term-array_like" title="(in NumPy v2.4)"><span>array_like</span></a></span></dt><dd><p>array of values to be grouped. Can be 1-D or 2-D and will be coerced to a
pandas object</p>
</dd>
<dt><strong>func</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">function</span></code>, <a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#list" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">list</span></code></a>, <a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a> or <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#None" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">None</span></code></a></span></dt><dd><p>Function to use for aggregating the data passed to pandas <code class="docutils literal notranslate"><span class="pre">GroupBy.apply</span></code>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">Series</span></code> | <code class="xref py py-obj docutils literal notranslate"><span class="pre">DataFrame</span></code></dt><dd><p>pandas object indexed by unique_ids</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.assign_self_weight">
<span class="sig-name descname"><span class="pre">assign_self_weight</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.assign_self_weight"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.assign_self_weight" title="Link to this definition">¶</a></dt>
<dd><p>Assign values to edges representing self-weight.</p>
<p>The value for each <code class="docutils literal notranslate"><span class="pre">focal</span> <span class="pre">==</span> <span class="pre">neighbor</span></code> location in
the graph is set to <code class="docutils literal notranslate"><span class="pre">weight</span></code>.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>weight</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a> | <a class="reference external" href="https://numpy.org/doc/stable/glossary.html#term-array_like" title="(in NumPy v2.4)"><span>array_like</span></a></span></dt><dd><p>Defines the value(s) to which the weight representing the relationship with
itself should be set. If a constant is passed then each self-weight will get
this value (default is 1). An array of length <code class="docutils literal notranslate"><span class="pre">Graph.n</span></code> can be passed to
set explicit values to each self-weight (assumed to be in the same order as
original data).</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>A new <code class="docutils literal notranslate"><span class="pre">Graph</span></code> with added self-weights.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;nybb&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;BoroName&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span>
<span class="go">               BoroCode  ...                                           geometry</span>
<span class="go">BoroName                 ...</span>
<span class="go">Staten Island         5  ...  MULTIPOLYGON (((970217.022 145643.332, 970227....</span>
<span class="go">Queens                4  ...  MULTIPOLYGON (((1029606.077 156073.814, 102957...</span>
<span class="go">Brooklyn              3  ...  MULTIPOLYGON (((1021176.479 151374.797, 102100...</span>
<span class="go">Manhattan             1  ...  MULTIPOLYGON (((981219.056 188655.316, 980940....</span>
<span class="go">Bronx                 2  ...  MULTIPOLYGON (((1012821.806 229228.265, 101278...</span>
<span class="go">[5 rows x 4 columns]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_contiguity</span><span class="p">(</span><span class="n">nybb</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity_weights</span> <span class="o">=</span> <span class="n">contiguity</span><span class="o">.</span><span class="n">assign_self_weight</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity_weights</span><span class="o">.</span><span class="n">adjacency</span>
<span class="go">focal          neighbor</span>
<span class="go">Staten Island  Staten Island    0.5</span>
<span class="go">Queens         Queens           0.5</span>
<span class="go">               Brooklyn         1.0</span>
<span class="go">               Manhattan        1.0</span>
<span class="go">               Bronx            1.0</span>
<span class="go">Brooklyn       Queens           1.0</span>
<span class="go">               Brooklyn         0.5</span>
<span class="go">               Manhattan        1.0</span>
<span class="go">Manhattan      Queens           1.0</span>
<span class="go">               Brooklyn         1.0</span>
<span class="go">               Manhattan        0.5</span>
<span class="go">               Bronx            1.0</span>
<span class="go">Bronx          Queens           1.0</span>
<span class="go">               Manhattan        1.0</span>
<span class="go">               Bronx            0.5</span>
<span class="go">Name: weight, dtype: float64</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.asymmetry">
<span class="sig-name descname"><span class="pre">asymmetry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">intrinsic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.asymmetry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.asymmetry" title="Link to this definition">¶</a></dt>
<dd><p>Asymmetry check.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>intrinsic</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>. Intrinsic symmetry is defined as:</p>
<div class="math notranslate nohighlight">
\[w_{i,j} == w_{j,i}\]</div>
<p>If <code class="docutils literal notranslate"><span class="pre">intrinsic</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code> symmetry is defined as:</p>
<div class="math notranslate nohighlight">
\[i \in N_j \ \&amp; \ j \in N_i\]</div>
<p>where <span class="math notranslate nohighlight">\(N_j\)</span> is the set of neighbors for <span class="math notranslate nohighlight">\(j\)</span>,
e.g., <code class="docutils literal notranslate"><span class="pre">True</span></code> requires equality of the weight to consider
two links equal, <code class="docutils literal notranslate"><span class="pre">False</span></code> requires only a presence of a link
with a non-zero weight.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html#pandas.Series" title="(in pandas v2.3.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.Series</span></code></a></dt><dd><p>A <code class="docutils literal notranslate"><span class="pre">Series</span></code> of <code class="docutils literal notranslate"><span class="pre">(i,j)</span></code> pairs of asymmetries sorted
ascending by the focal observation (index value),
where <code class="docutils literal notranslate"><span class="pre">i</span></code> is the focal and <code class="docutils literal notranslate"><span class="pre">j</span></code> is the neighbor.
An empty <code class="docutils literal notranslate"><span class="pre">Series</span></code> is returned if no asymmetries are found.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.build_block_contiguity">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">build_block_contiguity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">regimes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.build_block_contiguity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.build_block_contiguity" title="Link to this definition">¶</a></dt>
<dd><p>Generate Graph from block contiguity (regime neighbors)</p>
<p>Block contiguity structures are relevant when defining neighbor relations
based on membership in a regime. For example, all counties belonging to
the same state could be defined as neighbors, in an analysis of all
counties in the US.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>regimes</strong><span class="classifier">list-like</span></dt><dd><p>list-like of regimes. If pandas.Series, its index is used to encode Graph.
Otherwise a default RangeIndex is used.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>libpysal.graph.Graph encoding block contiguity</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">france</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s1">&#39;geoda guerry&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Dprmnt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In the GeoDa Guerry dataset, the Region column reflects the region
(North, East, West, South or Central) to which each department belongs.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">france</span><span class="p">[[</span><span class="s1">&#39;Region&#39;</span><span class="p">,</span> <span class="s1">&#39;geometry&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="go">             Region                                           geometry</span>
<span class="go">Dprtmnt</span>
<span class="go">Ain               E  POLYGON ((801150.000 2092615.000, 800669.000 2...</span>
<span class="go">Aisne             N  POLYGON ((729326.000 2521619.000, 729320.000 2...</span>
<span class="go">Allier            C  POLYGON ((710830.000 2137350.000, 711746.000 2...</span>
<span class="go">Basses-Alpes      E  POLYGON ((882701.000 1920024.000, 882408.000 1...</span>
<span class="go">Hautes-Alpes      E  POLYGON ((886504.000 1922890.000, 885733.000 1...</span>
</pre></div>
</div>
<p>Using the <code class="docutils literal notranslate"><span class="pre">&quot;Region&quot;</span></code> labels as <code class="docutils literal notranslate"><span class="pre">regimes</span></code> then identifies all departments
within the region as neighbors.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">block_contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_block_contiguity</span><span class="p">(</span><span class="n">france</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block_contiguity</span><span class="o">.</span><span class="n">adjacency</span>
<span class="go">focal   neighbor</span>
<span class="go">Ain     Basses-Alpes       1</span>
<span class="go">        Hautes-Alpes       1</span>
<span class="go">        Aube               1</span>
<span class="go">        Cote-d&#39;Or          1</span>
<span class="go">        Doubs              1</span>
<span class="go">                          ..</span>
<span class="go">Vienne  Mayenne            1</span>
<span class="go">        Morbihan           1</span>
<span class="go">        Basses-Pyrenees    1</span>
<span class="go">        Deux-Sevres        1</span>
<span class="go">        Vendee             1</span>
<span class="go">Name: weight, Length: 1360, dtype: int32</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.build_contiguity">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">build_contiguity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geometry</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rook</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">by_perimeter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.build_contiguity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.build_contiguity" title="Link to this definition">¶</a></dt>
<dd><p>Generate Graph from geometry based on contiguity</p>
<p>Contiguity builder assumes that all geometries are forming a coverage, i.e.
a non-overlapping mesh and neighbouring geometries share only points or
segments of their exterior boundaries. In practice, <code class="docutils literal notranslate"><span class="pre">build_contiguity</span></code> is
capable of creating a Graph of partially overlapping geometries when
<code class="docutils literal notranslate"><span class="pre">strict=False,</span> <span class="pre">by_perimeter=False</span></code>, but that would not strictly follow the
definition of queen or rook contiguity.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>geometry</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/glossary.html#term-array_like" title="(in NumPy v2.4)"><span>array_like</span></a> <code class="xref py py-obj docutils literal notranslate"><span class="pre">of</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">shapely.Geometry</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">objects</span></code></span></dt><dd><p>Could be geopandas.GeoSeries or geopandas.GeoDataFrame, in which case the
resulting Graph is indexed by the original index. If an array of
shapely.Geometry objects is passed, Graph will assume a RangeIndex.</p>
</dd>
<dt><strong>rook</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Contiguity method. If True, two geometries are considered neighbours if
they share at least one edge. If False, two geometries are considered
neighbours if they share at least one vertex. By default True</p>
</dd>
<dt><strong>by_perimeter</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>If True, <code class="docutils literal notranslate"><span class="pre">weight</span></code> represents the length of the shared boundary between
adjacent units, by default False. For row-standardized version of perimeter
weights, use
<code class="docutils literal notranslate"><span class="pre">Graph.build_contiguity(gdf,</span> <span class="pre">by_perimeter=True).transform(&quot;r&quot;)</span></code>.</p>
</dd>
<dt><strong>strict</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Use the strict topological method. If False, the contiguity is determined
based on shared coordinates or coordinate sequences representing edges.
This assumes geometry coverage that is topologically correct. This method
is faster but can miss some relations. If True, the contiguity is
determined based on geometric relations that do not require precise
topology. This method is slower but will result in correct contiguity
even if the topology of geometries is not optimal. By default False.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>libpysal.graph.Graph encoding contiguity weights</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;nybb&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;BoroName&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span>
<span class="go">               BoroCode  ...                                           geometry</span>
<span class="go">BoroName                 ...</span>
<span class="go">Staten Island         5  ...  MULTIPOLYGON (((970217.022 145643.332, 970227....</span>
<span class="go">Queens                4  ...  MULTIPOLYGON (((1029606.077 156073.814, 102957...</span>
<span class="go">Brooklyn              3  ...  MULTIPOLYGON (((1021176.479 151374.797, 102100...</span>
<span class="go">Manhattan             1  ...  MULTIPOLYGON (((981219.056 188655.316, 980940....</span>
<span class="go">Bronx                 2  ...  MULTIPOLYGON (((1012821.806 229228.265, 101278...</span>
<span class="go">[5 rows x 4 columns]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_contiguity</span><span class="p">(</span><span class="n">nybb</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span><span class="o">.</span><span class="n">adjacency</span>
<span class="go">focal          neighbor</span>
<span class="go">Staten Island  Staten Island    0</span>
<span class="go">Queens         Brooklyn         1</span>
<span class="go">               Manhattan        1</span>
<span class="go">               Bronx            1</span>
<span class="go">Brooklyn       Queens           1</span>
<span class="go">               Manhattan        1</span>
<span class="go">Manhattan      Queens           1</span>
<span class="go">               Brooklyn         1</span>
<span class="go">               Bronx            1</span>
<span class="go">Bronx          Queens           1</span>
<span class="go">               Manhattan        1</span>
<span class="go">Name: weight, dtype: int64</span>
</pre></div>
</div>
<p>Weight by perimeter instead of binary weights:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity_perimeter</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_contiguity</span><span class="p">(</span><span class="n">nybb</span><span class="p">,</span> <span class="n">by_perimeter</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity_perimeter</span><span class="o">.</span><span class="n">adjacency</span>
<span class="go">focal          neighbor</span>
<span class="go">Staten Island  Staten Island        0.000000</span>
<span class="go">Queens         Brooklyn         50867.502055</span>
<span class="go">               Manhattan          103.745207</span>
<span class="go">               Bronx                5.777002</span>
<span class="go">Brooklyn       Queens           50867.502055</span>
<span class="go">               Manhattan         5736.546898</span>
<span class="go">Manhattan      Queens             103.745207</span>
<span class="go">               Brooklyn          5736.546898</span>
<span class="go">               Bronx             5258.300879</span>
<span class="go">Bronx          Queens               5.777002</span>
<span class="go">               Manhattan         5258.300879</span>
<span class="go">Name: weight, dtype: float64</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.build_distance_band">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">build_distance_band</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bandwidth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.build_distance_band"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.build_distance_band" title="Link to this definition">¶</a></dt>
<dd><p>Generate Graph from geometry based on a distance band</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>data</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>, <a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoSeries.html#geopandas.GeoSeries" title="(in GeoPandas v1.1.2.dev58.dev+gfd4ce6534)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoSeries</span></code></a>, <a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoDataFrame.html#geopandas.GeoDataFrame" title="(in GeoPandas v1.1.2.dev58.dev+gfd4ce6534)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code></a></span></dt><dd><p>geometries containing locations to compute the
delaunay triangulation. If a geopandas object with Point
geometry is provided, the .geometry attribute is used. If a numpy.ndarray
with shapely geometry is used, then the coordinates are extracted and used.
If a numpy.ndarray of a shape (2,n) is used, it is assumed to contain x, y
coordinates.</p>
</dd>
<dt><strong>threshold</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a></span></dt><dd><p>distance band</p>
</dd>
<dt><strong>binary</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>If True <span class="math notranslate nohighlight">\(w_{ij}=1\)</span> if <span class="math notranslate nohighlight">\(d_{i,j}&lt;=threshold\)</span>, otherwise
<span class="math notranslate nohighlight">\(w_{i,j}=0\)</span>.
If False <span class="math notranslate nohighlight">\(wij=dij^{alpha}\)</span>, by default True.</p>
</dd>
<dt><strong>alpha</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>distance decay parameter for weight (default -1.0)
if alpha is positive the weights will not decline with
distance. Ignored if <code class="docutils literal notranslate"><span class="pre">binary=True</span></code> or <code class="docutils literal notranslate"><span class="pre">kernel</span></code> is not None.</p>
</dd>
<dt><strong>kernel</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>kernel function to use in order to weight the output graph. See
<a class="reference internal" href="#libpysal.graph.Graph.build_kernel" title="libpysal.graph.Graph.build_kernel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Graph.build_kernel()</span></code></a> for details. Ignored if <code class="docutils literal notranslate"><span class="pre">binary=True</span></code>.</p>
</dd>
<dt><strong>bandwidth</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#None" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">None</span></code></a>)</span></dt><dd><p>distance to use in the kernel computation. Should be on the same scale as
the input coordinates. Ignored if <code class="docutils literal notranslate"><span class="pre">binary=True</span></code> or <code class="docutils literal notranslate"><span class="pre">kernel=None</span></code>.</p>
</dd>
<dt><strong>taper</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#True" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">True</span></code></a>)</span></dt><dd><p>remove links with a weight equal to zero</p>
</dd>
<dt><strong>decay</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#False" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">False</span></code></a>)</span></dt><dd><p>whether to calculate the kernel using the decay formulation.
In the decay form, a kernel measures the distance decay in
similarity between observations. It varies from from maximal
similarity (1) at a distance of zero to minimal similarity (0
or negative) at some very large (possibly infinite) distance.
Otherwise, kernel functions are treated as proper
volume-preserving probability distributions.</p>
</dd>
<dt><strong>Returns</strong></dt><dd></dd>
<dt><strong>——-</strong></dt><dd></dd>
<dt><strong>Graph</strong></dt><dd><p>libpysal.graph.Graph encoding distance band weights</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;nybb&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;BoroName&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span>
<span class="go">               BoroCode  ...                                           geometry</span>
<span class="go">BoroName                 ...</span>
<span class="go">Staten Island         5  ...  MULTIPOLYGON (((970217.022 145643.332, 970227....</span>
<span class="go">Queens                4  ...  MULTIPOLYGON (((1029606.077 156073.814, 102957...</span>
<span class="go">Brooklyn              3  ...  MULTIPOLYGON (((1021176.479 151374.797, 102100...</span>
<span class="go">Manhattan             1  ...  MULTIPOLYGON (((981219.056 188655.316, 980940....</span>
<span class="go">Bronx                 2  ...  MULTIPOLYGON (((1012821.806 229228.265, 101278...</span>
<span class="go">[5 rows x 4 columns]</span>
</pre></div>
</div>
<p>Note that the method requires point geometry (or an array of coordinates
representing points) as an input.</p>
<p>The threshold distance is in the units of the geometry projection.
You can check it using the <code class="docutils literal notranslate"><span class="pre">nybb.crs</span></code> property.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">distance_band</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_distance_band</span><span class="p">(</span><span class="n">nybb</span><span class="o">.</span><span class="n">centroid</span><span class="p">,</span> <span class="mi">45000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance_band</span><span class="o">.</span><span class="n">adjacency</span>
<span class="go">focal          neighbor</span>
<span class="go">Staten Island  Staten Island    0</span>
<span class="go">Queens         Brooklyn         1</span>
<span class="go">Brooklyn       Queens           1</span>
<span class="go">Manhattan      Bronx            1</span>
<span class="go">Bronx          Manhattan        1</span>
<span class="go">Name: weight, dtype: int64</span>
</pre></div>
</div>
<p>The larger threshold yields more neighbors.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">distance_band</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_distance_band</span><span class="p">(</span><span class="n">nybb</span><span class="o">.</span><span class="n">centroid</span><span class="p">,</span> <span class="mi">110000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance_band</span><span class="o">.</span><span class="n">adjacency</span>
<span class="go">focal          neighbor</span>
<span class="go">Staten Island  Queens           1</span>
<span class="go">               Brooklyn         1</span>
<span class="go">               Manhattan        1</span>
<span class="go">Queens         Staten Island    1</span>
<span class="go">               Brooklyn         1</span>
<span class="go">               Manhattan        1</span>
<span class="go">               Bronx            1</span>
<span class="go">Brooklyn       Staten Island    1</span>
<span class="go">               Queens           1</span>
<span class="go">               Manhattan        1</span>
<span class="go">               Bronx            1</span>
<span class="go">Manhattan      Staten Island    1</span>
<span class="go">               Queens           1</span>
<span class="go">               Brooklyn         1</span>
<span class="go">               Bronx            1</span>
<span class="go">Bronx          Queens           1</span>
<span class="go">               Brooklyn         1</span>
<span class="go">               Manhattan        1</span>
<span class="go">Name: weight, dtype: int64</span>
</pre></div>
</div>
<p>Instead of binary weights you can use inverse distance.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">distance_band</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_distance_band</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">nybb</span><span class="o">.</span><span class="n">centroid</span><span class="p">,</span>
<span class="gp">... </span>    <span class="mi">45000</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">binary</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance_band</span><span class="o">.</span><span class="n">adjacency</span>
<span class="go">focal          neighbor</span>
<span class="go">Staten Island  Staten Island    0.000000</span>
<span class="go">Queens         Brooklyn         0.000024</span>
<span class="go">Brooklyn       Queens           0.000024</span>
<span class="go">Manhattan      Bronx            0.000026</span>
<span class="go">Bronx          Manhattan        0.000026</span>
<span class="go">Name: weight, dtype: float64</span>
</pre></div>
</div>
<p>Or specify the kernel function to derive weight from the distance.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">distance_band</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_distance_band</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">nybb</span><span class="o">.</span><span class="n">centroid</span><span class="p">,</span>
<span class="gp">... </span>    <span class="mi">45000</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">binary</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">kernel</span><span class="o">=</span><span class="s1">&#39;bisquare&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">bandwidth</span><span class="o">=</span><span class="mi">60000</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance_band</span><span class="o">.</span><span class="n">adjacency</span>
<span class="go">focal          neighbor</span>
<span class="go">Staten Island  Staten Island    0.000000</span>
<span class="go">Queens         Brooklyn         0.232079</span>
<span class="go">Brooklyn       Queens           0.232079</span>
<span class="go">Manhattan      Bronx            0.309825</span>
<span class="go">Bronx          Manhattan        0.309825</span>
<span class="go">Name: weight, dtype: float64</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.build_fuzzy_contiguity">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">build_fuzzy_contiguity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geometry</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predicate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'intersects'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.build_fuzzy_contiguity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.build_fuzzy_contiguity" title="Link to this definition">¶</a></dt>
<dd><p>Generate Graph from fuzzy contiguity</p>
<p>Fuzzy contiguity relaxes the notion of contiguity neighbors
for the case of geometry collections that violate the condition
of planar enforcement. It handles three types of conditions present
in such collections that would result in missing links when using
the regular contiguity methods.</p>
<p>The first are edges for nearby polygons that should be shared, but are
digitized separately for the individual polygons and the resulting edges
do not coincide, but instead the edges intersect. This case can also be
covered by <code class="docutils literal notranslate"><span class="pre">build_contiguty</span></code> with the <code class="docutils literal notranslate"><span class="pre">strict=False</span></code> parameter.</p>
<p>The second case is similar to the first, only the resultant edges do not
intersect but are “close”. The optional buffering of geometry then closes the
gaps between the polygons and a resulting intersection is encoded as a link.</p>
<p>The final case arises when one polygon is “inside” a second polygon but is not
encoded to represent a hole in the containing polygon.</p>
<p>It is also possible to create a contiguity based on a custom spatial predicate.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>geoms</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/glossary.html#term-array_like" title="(in NumPy v2.4)"><span>array_like</span></a> <code class="xref py py-obj docutils literal notranslate"><span class="pre">of</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">shapely.Geometry</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">objects</span></code></span></dt><dd><p>Could be geopandas.GeoSeries or geopandas.GeoDataFrame, in which case the
resulting Graph is indexed by the original index. If an array of
shapely.Geometry objects is passed, Graph will assume a RangeIndex.</p>
</dd>
<dt><strong>tolerance</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>The percentage of the length of the minimum side of the bounding rectangle
for the <code class="docutils literal notranslate"><span class="pre">geoms</span></code> to use in determining the buffering distance. Either
<code class="docutils literal notranslate"><span class="pre">tolerance</span></code> or <code class="docutils literal notranslate"><span class="pre">buffer</span></code> may be specified but not both.
By default None.</p>
</dd>
<dt><strong>buffer</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Exact buffering distance in the units of <code class="docutils literal notranslate"><span class="pre">geoms.crs</span></code>. Either
<code class="docutils literal notranslate"><span class="pre">tolerance</span></code> or <code class="docutils literal notranslate"><span class="pre">buffer</span></code> may be specified but not both.
By default None.</p>
</dd>
<dt><strong>predicate</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>The predicate to use for determination of neighbors. Default is
‘intersects’. If None is passed, neighbours are determined based
on the intersection of bounding boxes. See the documentation of
<code class="docutils literal notranslate"><span class="pre">geopandas.GeoSeries.sindex.query</span></code> for allowed predicates.</p>
</dd>
<dt><strong>**kwargs</strong></dt><dd><p>Keyword arguments passed to <code class="docutils literal notranslate"><span class="pre">geopandas.GeoSeries.buffer</span></code>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>libpysal.graph.Graph encoding fuzzy contiguity</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;nybb&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;BoroName&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span>
<span class="go">               BoroCode  ...                                           geometry</span>
<span class="go">BoroName                 ...</span>
<span class="go">Staten Island         5  ...  MULTIPOLYGON (((970217.022 145643.332, 970227....</span>
<span class="go">Queens                4  ...  MULTIPOLYGON (((1029606.077 156073.814, 102957...</span>
<span class="go">Brooklyn              3  ...  MULTIPOLYGON (((1021176.479 151374.797, 102100...</span>
<span class="go">Manhattan             1  ...  MULTIPOLYGON (((981219.056 188655.316, 980940....</span>
<span class="go">Bronx                 2  ...  MULTIPOLYGON (((1012821.806 229228.265, 101278...</span>
<span class="go">[5 rows x 4 columns]</span>
</pre></div>
</div>
<p>Example using the default parameters:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fuzzy_contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_fuzzy_contiguity</span><span class="p">(</span><span class="n">nybb</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fuzzy_contiguity</span>
<span class="go">&lt;Graph of 5 nodes and 10 nonzero edges indexed by</span>
<span class="go"> [&#39;Staten Island&#39;, &#39;Queens&#39;, &#39;Brooklyn&#39;, &#39;Manhattan&#39;, &#39;Bronx&#39;]&gt;</span>
</pre></div>
</div>
<p>Example using the tolerance of 0.05:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fuzzy_contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_fuzzy_contiguity</span><span class="p">(</span><span class="n">nybb</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fuzzy_contiguity</span>
<span class="go">&lt;Graph of 5 nodes and 12 nonzero edges indexed by</span>
<span class="go"> [&#39;Staten Island&#39;, &#39;Queens&#39;, &#39;Brooklyn&#39;, &#39;Manhattan&#39;, &#39;Bronx&#39;]&gt;</span>
</pre></div>
</div>
<p>Example using a buffer of 10000 feet (CRS of nybb is in feet):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fuzzy_contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_fuzzy_contiguity</span><span class="p">(</span><span class="n">nybb</span><span class="p">,</span> <span class="n">buffer</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fuzzy_contiguity</span>
<span class="go">&lt;Graph of 5 nodes and 14 nonzero edges indexed by</span>
<span class="go"> [&#39;Staten Island&#39;, &#39;Queens&#39;, &#39;Brooklyn&#39;, &#39;Manhattan&#39;, &#39;Bronx&#39;]&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.build_h3">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">build_h3</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'distance'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.build_h3"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.build_h3" title="Link to this definition">¶</a></dt>
<dd><p>Generate Graph from indices of H3 hexagons.</p>
<p>Encode a graph from a set of H3 hexagons. The graph is generated by
considering the H3 hexagons as nodes and connecting them based on their
contiguity. The contiguity is defined by the order parameter, which
specifies the number of steps to consider as neighbors. The weight
parameter defines the type of weight to assign to the edges.</p>
<p>Requires the <cite>h3</cite> library.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>ids</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/glossary.html#term-array_like" title="(in NumPy v2.4)"><span>array_like</span></a></span></dt><dd><p>Array of H3 IDs encoding focal geometries</p>
</dd>
<dt><strong>order</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Order of contiguity, by default 1</p>
</dd>
<dt><strong>weight</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Type of weight. Options are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">distance</span></code>: raw topological distance between cells</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">binary</span></code>: 1 for neighbors, 0 for non-neighbors</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inverse</span></code>: 1 / distance between cells</p></li>
</ul>
<p>By default “distance”.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">tobler.util</span><span class="w"> </span><span class="kn">import</span> <span class="n">h3fy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;geoda guerry&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h3</span> <span class="o">=</span> <span class="n">h3fy</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h3</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="go">                                                          geometry</span>
<span class="go">hex_id</span>
<span class="go">841f94dffffffff  POLYGON ((609346.657 2195981.397, 604556.817 2...</span>
<span class="go">841fa67ffffffff  POLYGON ((722074.162 2561038.244, 717442.706 2...</span>
<span class="go">84186a3ffffffff  POLYGON ((353695.287 2121176.341, 329999.974 2...</span>
<span class="go">8418609ffffffff  POLYGON ((387747.482 2509794.492, 364375.032 2...</span>
<span class="go">8418491ffffffff  POLYGON ((320872.289 1846157.662, 296923.464 1...</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h3_contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_h3</span><span class="p">(</span><span class="n">h3</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h3_contiguity</span>
<span class="go">&lt;Graph of 320 nodes and 1740 nonzero edges indexed by</span>
<span class="go"> [&#39;841f94dffffffff&#39;, &#39;841fa67ffffffff&#39;, &#39;84186a3ffffffff&#39;, ...]&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.build_kernel">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">build_kernel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gaussian'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bandwidth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'euclidean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coplanar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'raise'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.build_kernel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.build_kernel" title="Link to this definition">¶</a></dt>
<dd><p>Generate Graph from geometry data based on a kernel function</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>data</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>, <a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoSeries.html#geopandas.GeoSeries" title="(in GeoPandas v1.1.2.dev58.dev+gfd4ce6534)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoSeries</span></code></a>, <a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoDataFrame.html#geopandas.GeoDataFrame" title="(in GeoPandas v1.1.2.dev58.dev+gfd4ce6534)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code></a></span></dt><dd><p>geometries over which to compute a kernel. If a geopandas object with Point
geoemtry is provided, the .geometry attribute is used. If a numpy.ndarray
with shapely geoemtry is used, then the coordinates are extracted and used.
If a numpy.ndarray of a shape (2,n) is used, it is assumed to contain x, y
coordinates. If metric=”precomputed”, data is assumed to contain a
precomputed distance metric.</p>
</dd>
<dt><strong>kernel</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3.12/library/functions.html#callable" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">callable()</span></code></a> (default: ‘gaussian’)</span></dt><dd><p>kernel function to apply over the distance matrix computed by <cite>metric</cite>.
The following kernels are supported:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;triangular&quot;</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;parabolic&quot;</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;gaussian&quot;</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;bisquare&quot;</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;cosine&quot;</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'boxcar'</span></code>/discrete: all distances less than <cite>bandwidth</cite> are 1, and all
other distances are 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;identity&quot;</span></code>/None : do nothing, weight similarity based on raw distance</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">callable</span></code> : a user-defined function that takes the distance vector and
the bandwidth and returns the kernel: kernel(distances, bandwidth)</p></li>
</ul>
</dd>
<dt><strong>k</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#None" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">None</span></code></a>)</span></dt><dd><p>number of nearest neighbors used to truncate the kernel. This is assumed
to be constant across samples. If None, no truncation is conduted.</p>
</dd>
<dt><strong>bandwidth</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#None" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">None</span></code></a>)</span></dt><dd><p>distance to use in the kernel computation. Should be on the same scale as
the input coordinates.</p>
</dd>
<dt><strong>metric</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3.12/library/functions.html#callable" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">callable()</span></code></a> (default: ‘euclidean’)</span></dt><dd><p>distance function to apply over the input coordinates. Supported options
depend on whether or not scikit-learn is installed. If so, then any
distance function supported by scikit-learn is supported here. Otherwise,
only euclidean, minkowski, and manhattan/cityblock distances are admitted.</p>
</dd>
<dt><strong>p</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a> (default: 2)</span></dt><dd><p>parameter for minkowski metric, ignored if metric != “minkowski”.</p>
</dd>
<dt><strong>coplanar: str, optional (default “raise”)</strong></dt><dd><p>Method for handling coplanar points when <code class="docutils literal notranslate"><span class="pre">k</span></code> is not None. Options are
<code class="docutils literal notranslate"><span class="pre">'raise'</span></code> (raising an exception when coplanar points are present),
<code class="docutils literal notranslate"><span class="pre">'jitter'</span></code> (randomly displace coplanar points to produce uniqueness), &amp;
<code class="docutils literal notranslate"><span class="pre">'clique'</span></code> (induce fully-connected sub cliques for coplanar points).</p>
</dd>
<dt><strong>taper</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#True" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">True</span></code></a>)</span></dt><dd><p>remove links with a weight equal to zero</p>
</dd>
<dt><strong>decay</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#False" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">False</span></code></a>)</span></dt><dd><p>whether to calculate the kernel using the decay formulation.
In the decay form, a kernel measures the distance decay in
similarity between observations. It varies from from maximal
similarity (1) at a distance of zero to minimal similarity (0
or negative) at some very large (possibly infinite) distance.
Otherwise, kernel functions are treated as proper
volume-preserving probability distributions.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>libpysal.graph.Graph encoding kernel weights</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.build_knn">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">build_knn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'euclidean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coplanar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'raise'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.build_knn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.build_knn" title="Link to this definition">¶</a></dt>
<dd><p>Generate Graph from geometry data based on k-nearest neighbors search</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>data</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>, <a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoSeries.html#geopandas.GeoSeries" title="(in GeoPandas v1.1.2.dev58.dev+gfd4ce6534)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoSeries</span></code></a>, <a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoDataFrame.html#geopandas.GeoDataFrame" title="(in GeoPandas v1.1.2.dev58.dev+gfd4ce6534)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code></a></span></dt><dd><p>geometries over which to compute a kernel. If a geopandas object with Point
geoemtry is provided, the .geometry attribute is used. If a numpy.ndarray
with shapely geoemtry is used, then the coordinates are extracted and used.
If a numpy.ndarray of a shape (2,n) is used, it is assumed to contain x, y
coordinates.</p>
</dd>
<dt><strong>k</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>number of nearest neighbors.</p>
</dd>
<dt><strong>metric</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3.12/library/functions.html#callable" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">callable()</span></code></a> (default: ‘euclidean’)</span></dt><dd><p>distance function to apply over the input coordinates. Supported options
depend on whether or not scikit-learn is installed. If so, then any
distance function supported by scikit-learn is supported here. Otherwise,
only euclidean, minkowski, and manhattan/cityblock distances are admitted.</p>
</dd>
<dt><strong>p</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a> (default: 2)</span></dt><dd><p>parameter for minkowski metric, ignored if metric != “minkowski”.</p>
</dd>
<dt><strong>coplanar: str, optional (default “raise”)</strong></dt><dd><p>Method for handling coplanar points. Options include
<code class="docutils literal notranslate"><span class="pre">'raise'</span></code> (raising an exception when coplanar points are present),
<code class="docutils literal notranslate"><span class="pre">'jitter'</span></code> (randomly displace coplanar points to produce uniqueness), &amp;
<code class="docutils literal notranslate"><span class="pre">'clique'</span></code> (induce fully-connected sub cliques for coplanar points).</p>
</dd>
<dt><strong>taper</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#True" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">True</span></code></a>)</span></dt><dd><p>remove links with a weight equal to zero</p>
</dd>
<dt><strong>decay</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#False" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">False</span></code></a>)</span></dt><dd><p>whether to calculate the kernel using the decay formulation.
In the decay form, a kernel measures the distance decay in
similarity between observations. It varies from from maximal
similarity (1) at a distance of zero to minimal similarity (0
or negative) at some very large (possibly infinite) distance.
Otherwise, kernel functions are treated as proper
volume-preserving probability distributions.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>libpysal.graph.Graph encoding KNN weights</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;nybb&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;BoroName&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span>
<span class="go">               BoroCode  ...                                           geometry</span>
<span class="go">BoroName                 ...</span>
<span class="go">Staten Island         5  ...  MULTIPOLYGON (((970217.022 145643.332, 970227....</span>
<span class="go">Queens                4  ...  MULTIPOLYGON (((1029606.077 156073.814, 102957...</span>
<span class="go">Brooklyn              3  ...  MULTIPOLYGON (((1021176.479 151374.797, 102100...</span>
<span class="go">Manhattan             1  ...  MULTIPOLYGON (((981219.056 188655.316, 980940....</span>
<span class="go">Bronx                 2  ...  MULTIPOLYGON (((1012821.806 229228.265, 101278...</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">knn3</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_knn</span><span class="p">(</span><span class="n">nybb</span><span class="o">.</span><span class="n">centroid</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">knn3</span><span class="o">.</span><span class="n">adjacency</span>
<span class="go">focal           neighbor</span>
<span class="go">Staten Island   Queens           1</span>
<span class="go">                Brooklyn         1</span>
<span class="go">                Manhattan        1</span>
<span class="go">Queens          Brooklyn         1</span>
<span class="go">                Manhattan        1</span>
<span class="go">                Bronx            1</span>
<span class="go">Brooklyn        Staten Island    1</span>
<span class="go">                Queens           1</span>
<span class="go">                Manhattan        1</span>
<span class="go">Manhattan       Queens           1</span>
<span class="go">                Brooklyn         1</span>
<span class="go">                Bronx            1</span>
<span class="go">Bronx           Queens           1</span>
<span class="go">                Brooklyn         1</span>
<span class="go">                Manhattan        1</span>
<span class="go">Name: weight, dtype: int32</span>
</pre></div>
</div>
<p>Specifying k=1 identifies the nearest neighbor
(note that this can be asymmetrical):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">knn1</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_knn</span><span class="p">(</span><span class="n">nybb</span><span class="o">.</span><span class="n">centroid</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">knn1</span><span class="o">.</span><span class="n">adjacency</span>
<span class="go">focal          neighbor</span>
<span class="go">Staten Island  Brooklyn     1</span>
<span class="go">Queens         Brooklyn     1</span>
<span class="go">Brooklyn       Queens       1</span>
<span class="go">Manhattan      Bronx        1</span>
<span class="go">Bronx          Manhattan    1</span>
<span class="go">Name: weight, dtype: int32</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.build_raster_contiguity">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">build_raster_contiguity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">da</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rook</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coords_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_nodata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.build_raster_contiguity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.build_raster_contiguity" title="Link to this definition">¶</a></dt>
<dd><p>Generate Graph from <code class="docutils literal notranslate"><span class="pre">xarray.DataArray</span></code> raster object</p>
<p>Create Graph object encoding contiguity of raster cells from
<code class="docutils literal notranslate"><span class="pre">xarray.DataArray</span></code> object. The coordinates are flatten to tuples representing
the location of each cell within the raster.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>da</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">xarray.DataArray</span></code></span></dt><dd><p>Input 2D or 3D DataArray with shape=(z, y, x)</p>
</dd>
<dt><strong>rook</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Contiguity method. If True, two cells are considered neighbours if
they share at least one edge. If False, two geometries are considered
neighbours if they share at least one vertex. By default True</p>
</dd>
<dt><strong>z_value</strong><span class="classifier">{<a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a>}, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Select the z_value of 3D DataArray with multiple layers. By default None</p>
</dd>
<dt><strong>coords_labels</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Pass dimension labels for coordinates and layers if they do not
belong to default dimensions, which are (band/time, y/lat, x/lon)
e.g. <code class="docutils literal notranslate"><span class="pre">coords_labels</span> <span class="pre">=</span> <span class="pre">{&quot;y_label&quot;:</span> <span class="pre">&quot;latitude&quot;,</span> <span class="pre">&quot;x_label&quot;:</span> <span class="pre">&quot;longitude&quot;,</span>
<span class="pre">&quot;z_label&quot;:</span> <span class="pre">&quot;year&quot;}</span></code>
When None, defaults to empty dictionary.</p>
</dd>
<dt><strong>k</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Order of contiguity, this will select all neighbors up to k-th order.
Default is 1.</p>
</dd>
<dt><strong>include_nodata</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>If True, missing values will be assumed as non-missing when
selecting higher_order neighbors, Default is False</p>
</dd>
<dt><strong>n_jobs</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Number of cores to be used in the sparse weight construction. If -1,
all available cores are used. Default is 1. Requires <code class="docutils literal notranslate"><span class="pre">joblib</span></code>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>libpysal.graph.Graph encoding raster contiguity</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.build_spatial_matches">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">build_spatial_matches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'euclidean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_partial_match</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">metric_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.build_spatial_matches"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.build_spatial_matches" title="Link to this definition">¶</a></dt>
<dd><p>Match locations in one dataset to at least <cite>n_matches</cite>
locations in another (possibly identical) dataset
by minimizing the total distance between matched locations.</p>
<p>Letting <span class="math notranslate nohighlight">\(d_{ij}\)</span> be</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\text{minimize} \sum_i^n \sum_j^n  d_{ij}m_{ij}\\\text{subject to}
    \sum_j^n m_{ij} &gt;= k \forall i\\    m_{ij} \in {0,1} \forall ij\end{aligned}\end{align} \]</div>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>x</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>, <a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoSeries.html#geopandas.GeoSeries" title="(in GeoPandas v1.1.2.dev58.dev+gfd4ce6534)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoSeries</span></code></a>, <a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoDataFrame.html#geopandas.GeoDataFrame" title="(in GeoPandas v1.1.2.dev58.dev+gfd4ce6534)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code></a></span></dt><dd><p>geometries that need matches. If a geopandas.Geo* object
is provided, the .geometry attribute is used. If a numpy.ndarray with
a geometry dtype is used, then the coordinates are extracted and used.</p>
</dd>
<dt><strong>y</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>, <a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoSeries.html#geopandas.GeoSeries" title="(in GeoPandas v1.1.2.dev58.dev+gfd4ce6534)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoSeries</span></code></a>, <a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoDataFrame.html#geopandas.GeoDataFrame" title="(in GeoPandas v1.1.2.dev58.dev+gfd4ce6534)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#None" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">None</span></code></a>)</span></dt><dd><p>geometries that are used as a source for matching. If a geopandas object
is provided, the .geometry attribute is used. If a numpy.ndarray with
a geometry dtype is used, then the coordinates are extracted and
used. If none, matches are made within <cite>x</cite>.</p>
</dd>
<dt><strong>n_matches</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#None" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">None</span></code></a>)</span></dt><dd><p>number of matches</p>
</dd>
<dt><strong>metric</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3.12/library/functions.html#callable" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">callable()</span></code></a> (default: ‘euclidean’)</span></dt><dd><p>distance function to apply over the input coordinates. Supported options
depend on whether or not scikit-learn is installed. If so, then any
distance function supported by scikit-learn is supported here. Otherwise,
only euclidean, minkowski, and manhattan/cityblock distances are admitted.</p>
</dd>
<dt><strong>solver</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">solver</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">from</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">pulp</span></code> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#None" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">None</span></code></a>)</span></dt><dd><p>a solver defined by the pulp optimization library. If no solver is
provided, pulp’s default solver will be used. This is generally
pulp.COIN(), but this may vary depending on your configuration.</p>
</dd>
<dt><strong>return_mip</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#False" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">False</span></code></a>)</span></dt><dd><p>whether or not to return the instance of the pulp.LpProblem. By
default, the problem is not returned to the user.</p>
</dd>
<dt><strong>allow_partial_match</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#False" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">False</span></code></a>)</span></dt><dd><p>whether to allow for partial matching. A partial match may have
a weight between zero and one, while a “full” match (by default)
must have a weight of either zero or one. A partial matching may
have a shorter total distance, but will result in a weighted
graph.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.build_travel_cost">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">build_travel_cost</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">network</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapping_distance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.build_travel_cost"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.build_travel_cost" title="Link to this definition">¶</a></dt>
<dd><p>Generate a Graph based on shortest travel costs from a pandana.Network</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>df</strong><span class="classifier"><a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoDataFrame.html#geopandas.GeoDataFrame" title="(in GeoPandas v1.1.2.dev58.dev+gfd4ce6534)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code></a></span></dt><dd><p>geodataframe representing observations which are snapped to the nearest
node in the pandana.Network. CRS should be the same as the locations
of <code class="docutils literal notranslate"><span class="pre">node_x</span></code> and <code class="docutils literal notranslate"><span class="pre">node_y</span></code> in the pandana.Network (usually 4326 if network
comes from OSM, but sometimes projected to improve snapping quality).</p>
</dd>
<dt><strong>network</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pandana.Network</span></code></span></dt><dd><p>pandana Network object describing travel costs between nodes in the study
area.  See &lt;<a class="reference external" href="https://udst.github.io/pandana/">https://udst.github.io/pandana/</a>&gt; for more</p>
</dd>
<dt><strong>threshold</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>threshold representing maximum cost distances. This is measured in the same
units as the pandana.Network (not influenced by the df.crs in any way). For
travel modes with relatively constant speeds like walking or biking, this is
usually distance (e.g. meters if the Network is constructed from OSM). For a
a multimodal or auto network with variable travel speeds, this is usually
some measure of travel time</p>
</dd>
<dt><strong>kernel</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3.12/library/functions.html#callable" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">callable()</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>kernel transformation applied to the weights. See
libpysal.graph.Graph.build_kernel for more information on kernel
transformation options. Default is None, in which case the Graph weight
is pure distance between focal and neighbor</p>
</dd>
<dt><strong>mapping_distance</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></span></dt><dd><p>snapping tolerance passed to <code class="docutils literal notranslate"><span class="pre">pandana.Network.get_node_ids</span></code> that defines
the maximum range at which observations are snapped to nearest nodes in the
network. Default is None</p>
</dd>
<dt><strong>taper</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#True" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">True</span></code></a>)</span></dt><dd><p>remove links with a weight equal to zero</p>
</dd>
<dt><strong>decay</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#False" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">False</span></code></a>)</span></dt><dd><p>whether to calculate the kernel using the decay formulation.
In the decay form, a kernel measures the distance decay in
similarity between observations. It varies from from maximal
similarity (1) at a distance of zero to minimal similarity (0
or negative) at some very large (possibly infinite) distance.
Otherwise, kernel functions are treated as proper
volume-preserving probability distributions.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geodatasets</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">osmnx</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ox</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pandana</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pdna</span>
</pre></div>
</div>
<p>Read an example geodataframe:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">geodatasets</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;geoda Cincinnati&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="mi">4326</span><span class="p">)</span>
</pre></div>
</div>
<p>Download a walk network using osmnx</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">osm_graph</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">graph_from_polygon</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">union_all</span><span class="p">(),</span> <span class="n">network_type</span><span class="o">=</span><span class="s2">&quot;walk&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nodes</span><span class="p">,</span> <span class="n">edges</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">utils_graph</span><span class="o">.</span><span class="n">graph_to_gdfs</span><span class="p">(</span><span class="n">osm_graph</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">edges</span> <span class="o">=</span> <span class="n">edges</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</pre></div>
</div>
<p>Generate a routable pandana network from the OSM nodes and edges</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">network</span> <span class="o">=</span> <span class="n">pdna</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">edge_from</span><span class="o">=</span><span class="n">edges</span><span class="p">[</span><span class="s2">&quot;u&quot;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">edge_to</span><span class="o">=</span><span class="n">edges</span><span class="p">[</span><span class="s2">&quot;v&quot;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">edge_weights</span><span class="o">=</span><span class="n">edges</span><span class="p">[[</span><span class="s2">&quot;length&quot;</span><span class="p">]],</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">node_x</span><span class="o">=</span><span class="n">nodes</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">node_y</span><span class="o">=</span><span class="n">nodes</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">],)</span>
</pre></div>
</div>
<p>Use the pandana network to compute shortest paths between gdf centroids and
generate a Graph</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">G</span> <span class="o">=</span> <span class="n">Graph</span><span class="o">.</span><span class="n">build_travel_cost</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">set_geometry</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">centroid</span><span class="p">),</span> <span class="n">network</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">adjacency</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="go">focal  neighbor</span>
<span class="go">0       62          385.609009</span>
<span class="go">        65          309.471985</span>
<span class="go">        115         346.858002</span>
<span class="go">        116           0.000000</span>
<span class="go">        117         333.639008</span>
<span class="go">Name: weight, dtype: float64</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.build_triangulation">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">build_triangulation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'delaunay'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bandwidth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'boxcar'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'bounding_box'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rook</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coplanar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'raise'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">taper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.build_triangulation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.build_triangulation" title="Link to this definition">¶</a></dt>
<dd><p>Generate Graph from geometry based on triangulation</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>data</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>, <a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoSeries.html#geopandas.GeoSeries" title="(in GeoPandas v1.1.2.dev58.dev+gfd4ce6534)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoSeries</span></code></a>, <a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoDataFrame.html#geopandas.GeoDataFrame" title="(in GeoPandas v1.1.2.dev58.dev+gfd4ce6534)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code></a></span></dt><dd><p>geometries containing locations to compute the
delaunay triangulation. If a geopandas object with Point
geoemtry is provided, the .geometry attribute is used. If a numpy.ndarray
with shapely geoemtry is used, then the coordinates are extracted and used.
If a numpy.ndarray of a shape (2,n) is used, it is assumed to contain x, y
coordinates.</p>
</dd>
<dt><strong>method</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>, (<code class="xref py py-obj docutils literal notranslate"><span class="pre">default</span></code> “delaunay”)</span></dt><dd><p>method of extracting the weights from triangulation. Supports:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;delaunay&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;gabriel&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;relative_neighborhood&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;voronoi&quot;</span></code></p></li>
</ul>
</dd>
<dt><strong>bandwidth</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>distance to use in the kernel computation. Should be on the same scale as
the input coordinates, by default numpy.inf</p>
</dd>
<dt><strong>kernel</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>kernel function to use in order to weight the output graph. See
<a class="reference internal" href="#libpysal.graph.Graph.build_kernel" title="libpysal.graph.Graph.build_kernel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Graph.build_kernel()</span></code></a> for details. By default “boxcar”</p>
</dd>
<dt><strong>clip</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a> (default: ‘bbox’)</span></dt><dd><p>Clipping method when <code class="docutils literal notranslate"><span class="pre">method=&quot;voronoi&quot;</span></code>. Ignored otherwise.
Default is <code class="docutils literal notranslate"><span class="pre">'bounding_box'</span></code>. Options are as follows.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">None</span></code></dt><dd><p>No clip is applied. Voronoi cells may be arbitrarily larger that the
source map. Note that this may lead to cells that are many orders of
magnitude larger in extent than the original map. Not recommended.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'bounding_box'</span></code></dt><dd><p>Clip the voronoi cells to the bounding box of the input points.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'convex_hull'</span></code></dt><dd><p>Clip the voronoi cells to the convex hull of the input points.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'alpha_shape'</span></code></dt><dd><p>Clip the voronoi cells to the tightest hull that contains all points
(e.g. the smallest alpha shape, using
<a class="reference internal" href="libpysal.cg.alpha_shape_auto.html#libpysal.cg.alpha_shape_auto" title="libpysal.cg.alpha_shape_auto"><code class="xref py py-func docutils literal notranslate"><span class="pre">libpysal.cg.alpha_shape_auto()</span></code></a>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">shapely.Polygon</span></code></dt><dd><p>Clip to an arbitrary Polygon.</p>
</dd>
</dl>
</dd>
<dt><strong>rook</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Contiguity method when <code class="docutils literal notranslate"><span class="pre">method=&quot;voronoi&quot;</span></code>. Ignored otherwise.
If True, two geometries are considered neighbours if they
share at least one edge. If False, two geometries are considered neighbours
if they share at least one vertex. By default True</p>
</dd>
<dt><strong>coplanar: str, optional (default “raise”)</strong></dt><dd><p>Method for handling coplanar points. Options include
<code class="docutils literal notranslate"><span class="pre">'raise'</span></code> (raising an exception when coplanar points are present),
<code class="docutils literal notranslate"><span class="pre">'jitter'</span></code> (randomly displace coplanar points to produce uniqueness), &amp;
<code class="docutils literal notranslate"><span class="pre">'clique'</span></code> (induce fully-connected sub cliques for coplanar points).</p>
</dd>
<dt><strong>taper</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#True" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">True</span></code></a>)</span></dt><dd><p>remove links with a weight equal to zero</p>
</dd>
<dt><strong>decay</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a> (default: <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#False" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">False</span></code></a>)</span></dt><dd><p>whether to calculate the kernel using the decay formulation.
In the decay form, a kernel measures the distance decay in
similarity between observations. It varies from from maximal
similarity (1) at a distance of zero to minimal similarity (0
or negative) at some very large (possibly infinite) distance.
Otherwise, kernel functions are treated as proper
volume-preserving probability distributions.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>libpysal.graph.Graph encoding triangulation weights</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;nybb&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;BoroName&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span>
<span class="go">               BoroCode  ...                                           geometry</span>
<span class="go">BoroName                 ...</span>
<span class="go">Staten Island         5  ...  MULTIPOLYGON (((970217.022 145643.332, 970227....</span>
<span class="go">Queens                4  ...  MULTIPOLYGON (((1029606.077 156073.814, 102957...</span>
<span class="go">Brooklyn              3  ...  MULTIPOLYGON (((1021176.479 151374.797, 102100...</span>
<span class="go">Manhattan             1  ...  MULTIPOLYGON (((981219.056 188655.316, 980940....</span>
<span class="go">Bronx                 2  ...  MULTIPOLYGON (((1012821.806 229228.265, 101278...</span>
<span class="go">[5 rows x 4 columns]</span>
</pre></div>
</div>
<p>Note that the method requires point geometry (or an array of coordinates
representing points) as an input.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">triangulation</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_triangulation</span><span class="p">(</span><span class="n">nybb</span><span class="o">.</span><span class="n">centroid</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">triangulation</span><span class="o">.</span><span class="n">adjacency</span>
<span class="go">focal          neighbor</span>
<span class="go">Staten Island  Brooklyn         1</span>
<span class="go">               Manhattan        1</span>
<span class="go">Queens         Brooklyn         1</span>
<span class="go">               Manhattan        1</span>
<span class="go">               Bronx            1</span>
<span class="go">Brooklyn       Staten Island    1</span>
<span class="go">               Queens           1</span>
<span class="go">               Manhattan        1</span>
<span class="go">Manhattan      Staten Island    1</span>
<span class="go">               Queens           1</span>
<span class="go">               Brooklyn         1</span>
<span class="go">               Bronx            1</span>
<span class="go">Bronx          Queens           1</span>
<span class="go">               Manhattan        1</span>
<span class="go">Name: weight, dtype: int64</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="libpysal.graph.Graph.cardinalities">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cardinalities</span></span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.cardinalities"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.cardinalities" title="Link to this definition">¶</a></dt>
<dd><p>Number of neighbors for each observation</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html#pandas.Series" title="(in pandas v2.3.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.Series</span></code></a></dt><dd><p>Series with a number of neighbors per each observation</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="libpysal.graph.Graph.component_labels">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">component_labels</span></span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.component_labels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.component_labels" title="Link to this definition">¶</a></dt>
<dd><p>Get component labels per observation</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v2.4)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.array</span></code></a></dt><dd><p>Array of component labels</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.copy" title="Link to this definition">¶</a></dt>
<dd><p>Make a copy of this Graph’s adjacency table and transformation</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>deep</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Make a deep copy of the adjacency table, by default True</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>libpysal.graph.Graph as a copy of the original</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.describe">
<span class="sig-name descname"><span class="pre">describe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statistics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.describe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.describe" title="Link to this definition">¶</a></dt>
<dd><p>Describe the distribution of <code class="docutils literal notranslate"><span class="pre">y</span></code> values within the neighbors of each node.</p>
<p>Given the graph, computes the descriptive statistics of values within the
neighbourhood of each node. Optionally, the values can be limited to a certain
quantile range before computing the statistics.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>y</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDArray</span></code>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">np.float64</span></code>] | <code class="xref py py-obj docutils literal notranslate"><span class="pre">Series</span></code></span></dt><dd><p>An 1D array of numeric values to be described.</p>
</dd>
<dt><strong>q</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#tuple" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a>, <a class="reference external" href="https://docs.python.org/3.12/library/functions.html#float" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a>] | <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#None" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">None</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Tuple of percentages for the percentiles to compute.
Values must be between 0 and 100 inclusive. When set, values below and above
the percentiles will be discarded before computation of the statistics.
The percentiles are computed for each neighborhood. By default None.</p>
</dd>
<dt><strong>statistics</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#list" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">list</span></code></a>[<a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>] | <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#None" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">None</span></code></a></span></dt><dd><p>A list of stats functions to compute. If None, compute all
available functions - “count”, “mean”, “median”,
“std”, “min”, “max”, “sum”, “nunique”, “mode”. By default None.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">DataFrame</span></code></dt><dd><p>A DataFrame with descriptive statistics.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The index of <code class="docutils literal notranslate"><span class="pre">values</span></code> must match the index of the graph.</p>
<p>Weight values do not affect the calculations, only adjacency does.</p>
<p>Returns numpy.nan for all isolates.</p>
<p>The numba package is used extensively in this function
to accelerate the computation of statistics.
Without numba, these computations may become slow on large data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.eliminate_zeros">
<span class="sig-name descname"><span class="pre">eliminate_zeros</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.eliminate_zeros"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.eliminate_zeros" title="Link to this definition">¶</a></dt>
<dd><p>Remove graph edges with zero weight</p>
<p>Eliminates edges with weight == 0 that do not encode an
isolate. This is useful to clean-up edges that will make
no effect in operations like <a class="reference internal" href="#libpysal.graph.Graph.lag" title="libpysal.graph.Graph.lag"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lag()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>subset of Graph with zero-weight edges eliminated</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.explore">
<span class="sig-name descname"><span class="pre">explore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'black'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge_kws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_kws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focal_kws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.explore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.explore" title="Link to this definition">¶</a></dt>
<dd><p>Plot graph as an interactive Folium Map</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>gdf</strong><span class="classifier"><a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoDataFrame.html#geopandas.GeoDataFrame" title="(in GeoPandas v1.1.2.dev58.dev+gfd4ce6534)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code></a></span></dt><dd><p>geodataframe used to instantiate to Graph</p>
</dd>
<dt><strong>focal</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#list" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">list</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>subset of focal observations to plot in the map, by default None.
If none, all relationships are plotted</p>
</dd>
<dt><strong>nodes</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>whether to display observations as nodes in the map, by default True</p>
</dd>
<dt><strong>color</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>color applied to nodes and edges, by default “black”</p>
</dd>
<dt><strong>edge_kws</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>additional keyword arguments passed to geopandas explore function
when plotting edges, by default None</p>
</dd>
<dt><strong>node_kws</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>additional keyword arguments passed to geopandas explore function
when plotting nodes, by default None</p>
</dd>
<dt><strong>focal_kws</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>additional keyword arguments passed to geopandas explore function
when plotting focal observations, by default None. Only applicable when
passing a subset of nodes with the <cite>focal</cite> argument</p>
</dd>
<dt><strong>m</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Folilum.Map</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>folium map objecto to plot on top of, by default None</p>
</dd>
<dt><strong>**kwargs</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>additional keyword arguments are passed directly to geopandas.explore, when
<code class="docutils literal notranslate"><span class="pre">m=None</span></code> by default None</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">folium.Map</span></code></dt><dd><p>folium map</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.from_W">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_W</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">w</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.from_W"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.from_W" title="Link to this definition">¶</a></dt>
<dd><p>Create an experimental Graph from libpysal.weights.W object</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>w</strong><span class="classifier"><a class="reference internal" href="libpysal.weights.W.html#libpysal.weights.W" title="libpysal.weights.W"><code class="xref py py-obj docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code></a></span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>libpysal.graph.Graph from W</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;nybb&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;BoroName&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span>
<span class="go">               BoroCode  ...                                           geometry</span>
<span class="go">BoroName                 ...</span>
<span class="go">Staten Island         5  ...  MULTIPOLYGON (((970217.022 145643.332, 970227....</span>
<span class="go">Queens                4  ...  MULTIPOLYGON (((1029606.077 156073.814, 102957...</span>
<span class="go">Brooklyn              3  ...  MULTIPOLYGON (((1021176.479 151374.797, 102100...</span>
<span class="go">Manhattan             1  ...  MULTIPOLYGON (((981219.056 188655.316, 980940....</span>
<span class="go">Bronx                 2  ...  MULTIPOLYGON (((1012821.806 229228.265, 101278...</span>
<span class="go">[5 rows x 4 columns]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">queen_w</span> <span class="o">=</span> <span class="n">weights</span><span class="o">.</span><span class="n">Queen</span><span class="o">.</span><span class="n">from_dataframe</span><span class="p">(</span><span class="n">nybb</span><span class="p">,</span> <span class="n">use_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">queen_graph</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">from_W</span><span class="p">(</span><span class="n">queen_w</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">queen_graph</span>
<span class="go">&lt;Graph of 5 nodes and 10 nonzero edges indexed by</span>
<span class="go"> [&#39;Staten Island&#39;, &#39;Queens&#39;, &#39;Brooklyn&#39;, &#39;Manhattan&#39;, &#39;Bronx&#39;]&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.from_adjacency">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_adjacency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">adjacency</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focal_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'focal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neighbor_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'neighbor'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'weight'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.from_adjacency"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.from_adjacency" title="Link to this definition">¶</a></dt>
<dd><p>Create a Graph from a pandas DataFrame formatted as an adjacency list</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>adjacency</strong><span class="classifier"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a></span></dt><dd><p>a dataframe formatted as an ajacency list. Should have columns
“focal”, “neighbor”, and “weight”, or columns that can be mapped
to these (e.g. origin, destination, cost)</p>
</dd>
<dt><strong>focal</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>name of column holding focal/origin index, by default ‘focal’</p>
</dd>
<dt><strong>neighbor</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>name of column holding neighbor/destination index, by default ‘neighbor’</p>
</dd>
<dt><strong>weight</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>name of column holding weight values, by default ‘weight’</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>libpysal.graph.Graph</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.from_arrays">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_arrays</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">focal_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neighbor_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.from_arrays"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.from_arrays" title="Link to this definition">¶</a></dt>
<dd><p>Generate Graph from arrays of indices and weights of the same length</p>
<p>The arrays needs to be sorted in a way ensuring that focal_ids.unique() is
equal to the index of original observations from which the Graph is being built</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>focal_index</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/glossary.html#term-array_like" title="(in NumPy v2.4)"><span>array_like</span></a></span></dt><dd><p>focal indices</p>
</dd>
<dt><strong>neighbor_index</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/glossary.html#term-array_like" title="(in NumPy v2.4)"><span>array_like</span></a></span></dt><dd><p>neighbor indices</p>
</dd>
<dt><strong>weight</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/glossary.html#term-array_like" title="(in NumPy v2.4)"><span>array_like</span></a></span></dt><dd><p>weights</p>
</dd>
<dt><strong>**kwargs</strong></dt><dd><p>keyword arguments passed to the class constructor</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>libpysal.graph.Graph based on arrays</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.from_dicts">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dicts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">neighbors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.from_dicts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.from_dicts" title="Link to this definition">¶</a></dt>
<dd><p>Generate Graph from dictionaries of neighbors and weights</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>neighbors</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>dictionary of neighbors with the <code class="docutils literal notranslate"><span class="pre">{focal:</span> <span class="pre">[neighbor1,</span> <span class="pre">neighbor2]}</span></code>
structure</p>
</dd>
<dt><strong>weights</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>dictionary of neighbors with the <code class="docutils literal notranslate"><span class="pre">{focal:</span> <span class="pre">[weight1,</span> <span class="pre">weight2]}</span></code>
structure. If None, assumes binary weights.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>libpysal.graph.Graph based on dictionaries</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">neighbors</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;Africa&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Asia&#39;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="s1">&#39;Asia&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Africa&#39;</span><span class="p">,</span> <span class="s1">&#39;Europe&#39;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="s1">&#39;Australia&#39;</span><span class="p">:</span> <span class="p">[],</span>
<span class="gp">... </span>    <span class="s1">&#39;Europe&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Asia&#39;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="s1">&#39;North America&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;South America&#39;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="s1">&#39;South America&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;North America&#39;</span><span class="p">],</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connectivity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">from_dicts</span><span class="p">(</span><span class="n">neighbors</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connectivity</span><span class="o">.</span><span class="n">adjacency</span>
<span class="go">focal          neighbor</span>
<span class="go">Africa         Asia             1</span>
<span class="go">Asia           Africa           1</span>
<span class="go">               Europe           1</span>
<span class="go">Australia      Australia        0</span>
<span class="go">Europe         Asia             1</span>
<span class="go">North America  South America    1</span>
<span class="go">South America  North America    1</span>
<span class="go">Name: weight, dtype: float64</span>
</pre></div>
</div>
<p>You can also specify weights (for example based
on the length of the shared border):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">weights</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;Africa&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>    <span class="s1">&#39;Asia&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">],</span>
<span class="gp">... </span>    <span class="s1">&#39;Australia&#39;</span><span class="p">:</span> <span class="p">[],</span>
<span class="gp">... </span>    <span class="s1">&#39;Europe&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>    <span class="s1">&#39;North America&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>    <span class="s1">&#39;South America&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connectivity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">from_dicts</span><span class="p">(</span><span class="n">neighbors</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connectivity</span><span class="o">.</span><span class="n">adjacency</span>
<span class="go">focal          neighbor</span>
<span class="go">Africa         Asia             1.0</span>
<span class="go">Asia           Africa           0.2</span>
<span class="go">               Europe           0.8</span>
<span class="go">Australia      Australia        0.0</span>
<span class="go">Europe         Asia             1.0</span>
<span class="go">North America  South America    1.0</span>
<span class="go">South America  North America    1.0</span>
<span class="go">Name: weight, dtype: float64</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.from_sparse">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_sparse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sparse</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.from_sparse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.from_sparse" title="Link to this definition">¶</a></dt>
<dd><p>Convert a <code class="docutils literal notranslate"><span class="pre">scipy.sparse</span></code> array to a PySAL <code class="docutils literal notranslate"><span class="pre">Graph</span></code> object.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>sparse</strong><span class="classifier"><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/sparse.html#module-scipy.sparse" title="(in SciPy v1.16.2)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">scipy.sparse</span></code></a> <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">array</span></code></a></span></dt><dd><p>sparse representation of a graph</p>
</dd>
<dt><strong>ids</strong><span class="classifier">list-like, <code class="xref py py-obj docutils literal notranslate"><span class="pre">default</span></code> <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#None" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">None</span></code></a></span></dt><dd><p>list-like of ids for geometries that is mappable to
positions from sparse. If None, the positions are used as labels.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>libpysal.graph.Graph based on sparse</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.from_weights_dict">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_weights_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weights_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.from_weights_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.from_weights_dict" title="Link to this definition">¶</a></dt>
<dd><p>Generate Graph from a dict of dicts</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>weights_dict</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dictionary</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">of</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">dictionaries</span></code></span></dt><dd><p>weights dictionary with the <code class="docutils literal notranslate"><span class="pre">{focal:</span> <span class="pre">{neighbor:</span> <span class="pre">weight}}</span></code> structure.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>libpysal.graph.Graph based on weights dictionary of dictionaries</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.generate_da">
<span class="sig-name descname"><span class="pre">generate_da</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.generate_da"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.generate_da" title="Link to this definition">¶</a></dt>
<dd><p>Creates xarray.DataArray object from passed data aligned with the Graph.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>y</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/glossary.html#term-array_like" title="(in NumPy v2.4)"><span>array_like</span></a></span></dt><dd><p>flat array that shall be reshaped into a DataArray with dimensionality
conforming to Graph</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">xarray.DataArray</span></code></dt><dd><p>instance of xarray.DataArray that can be aligned with the DataArray from
which Graph was built</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.higher_order">
<span class="sig-name descname"><span class="pre">higher_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shortest_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diagonal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.higher_order"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.higher_order" title="Link to this definition">¶</a></dt>
<dd><p>Contiguity weights object of order <span class="math notranslate nohighlight">\(k\)</span>.</p>
<p>Proper higher order neighbors are returned such that <span class="math notranslate nohighlight">\(i\)</span> and <span class="math notranslate nohighlight">\(j\)</span>
are <span class="math notranslate nohighlight">\(k\)</span>-order neighbors if the shortest path from <span class="math notranslate nohighlight">\(i-j\)</span> is of
length <span class="math notranslate nohighlight">\(k\)</span>.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>k</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Order of contiguity. By default 2.</p>
</dd>
<dt><strong>shortest_path</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>If True, <span class="math notranslate nohighlight">\(i,j\)</span> and <span class="math notranslate nohighlight">\(k\)</span>-order neighbors if the shortest
path for <span class="math notranslate nohighlight">\(i,j\)</span> is <span class="math notranslate nohighlight">\(k\)</span>. If False, <span class="math notranslate nohighlight">\(i,j\)</span> are
<cite>k</cite>-order neighbors if there is a path from <span class="math notranslate nohighlight">\(i,j\)</span> of length
<span class="math notranslate nohighlight">\(k\)</span>. By default True.</p>
</dd>
<dt><strong>diagonal</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>If True, keep <span class="math notranslate nohighlight">\(k\)</span>-order (<span class="math notranslate nohighlight">\(i,j\)</span>) joins when <span class="math notranslate nohighlight">\(i==j\)</span>.
If False, remove <span class="math notranslate nohighlight">\(k\)</span>-order (<span class="math notranslate nohighlight">\(i,j\)</span>) joins when
<span class="math notranslate nohighlight">\(i==j\)</span>. By default False.</p>
</dd>
<dt><strong>lower_order</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>If True, include lower order contiguities. If False return only weights of
order <span class="math notranslate nohighlight">\(k\)</span>. By default False.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>higher order weights</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;geoda guerry&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_contiguity</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span>
<span class="go">&lt;Graph of 85 nodes and 420 nonzero edges indexed by</span>
<span class="go"> [0, 1, 2, 3, 4, ...]&gt;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span><span class="o">.</span><span class="n">higher_order</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&lt;Graph of 85 nodes and 756 nonzero edges indexed by</span>
<span class="go"> [0, 1, 2, 3, 4, ...]&gt;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span><span class="o">.</span><span class="n">higher_order</span><span class="p">(</span><span class="n">lower_order</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">&lt;Graph of 85 nodes and 1176 nonzero edges indexed by</span>
<span class="go"> [0, 1, 2, 3, 4, ...]&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="libpysal.graph.Graph.index_pairs">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">index_pairs</span></span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.index_pairs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.index_pairs" title="Link to this definition">¶</a></dt>
<dd><p>Return focal-neighbor index pairs</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#tuple" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">tuple</span></code></a>(<code class="xref py py-obj docutils literal notranslate"><span class="pre">Index</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Index</span></code>)</dt><dd><p>tuple of two aligned pandas.Index objects encoding all edges of the Graph
by their nodes</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;nybb&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;BoroName&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span>
<span class="go">               BoroCode  ...                                           geometry</span>
<span class="go">BoroName                 ...</span>
<span class="go">Staten Island         5  ...  MULTIPOLYGON (((970217.022 145643.332, 970227....</span>
<span class="go">Queens                4  ...  MULTIPOLYGON (((1029606.077 156073.814, 102957...</span>
<span class="go">Brooklyn              3  ...  MULTIPOLYGON (((1021176.479 151374.797, 102100...</span>
<span class="go">Manhattan             1  ...  MULTIPOLYGON (((981219.056 188655.316, 980940....</span>
<span class="go">Bronx                 2  ...  MULTIPOLYGON (((1012821.806 229228.265, 101278...</span>
<span class="go">[5 rows x 4 columns]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_contiguity</span><span class="p">(</span><span class="n">nybb</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">focal</span><span class="p">,</span> <span class="n">neighbor</span> <span class="o">=</span> <span class="n">contiguity</span><span class="o">.</span><span class="n">index_pairs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">focal</span>
<span class="go">Index([&#39;Staten Island&#39;, &#39;Queens&#39;, &#39;Queens&#39;, &#39;Queens&#39;, &#39;Brooklyn&#39;, &#39;Brooklyn&#39;,</span>
<span class="go">       &#39;Manhattan&#39;, &#39;Manhattan&#39;, &#39;Manhattan&#39;, &#39;Bronx&#39;, &#39;Bronx&#39;],</span>
<span class="go">      dtype=&#39;object&#39;, name=&#39;focal&#39;)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">neighbor</span>
<span class="go">Index([&#39;Staten Island&#39;, &#39;Brooklyn&#39;, &#39;Manhattan&#39;, &#39;Bronx&#39;, &#39;Queens&#39;,</span>
<span class="go">       &#39;Manhattan&#39;, &#39;Queens&#39;, &#39;Brooklyn&#39;, &#39;Bronx&#39;, &#39;Queens&#39;, &#39;Manhattan&#39;],</span>
<span class="go">      dtype=&#39;object&#39;, name=&#39;neighbor&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="libpysal.graph.Graph.isolates">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">isolates</span></span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.isolates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.isolates" title="Link to this definition">¶</a></dt>
<dd><p>Index of observations with no neighbors</p>
<p>Isolates are encoded as a self-loop with
the weight == 0 in the adjacency table.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.html#pandas.Index" title="(in pandas v2.3.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.Index</span></code></a></dt><dd><p>Index with a subset of observations that do not have any neighbor</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.lag">
<span class="sig-name descname"><span class="pre">lag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categorical</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'raise'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.lag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.lag" title="Link to this definition">¶</a></dt>
<dd><p>Spatial lag operator</p>
<p>Constructs spatial lag based on neighbor relations of the graph.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>y</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/glossary.html#term-array_like" title="(in NumPy v2.4)"><span>array_like</span></a></span></dt><dd><p>Array-like aligned with the graph. Can be 2-dimensional if
all columns are numerical.</p>
</dd>
<dt><strong>categorical</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>True if y is categorical, False if y is continuous. If None, it is
derived from the dtype of <code class="docutils literal notranslate"><span class="pre">y</span></code>.</p>
</dd>
<dt><strong>ties</strong><span class="classifier">{‘raise’, ‘random’, ‘tryself’}, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Policy on how to break ties when a focal unit has multiple
modes for a categorical lag.
- ‘raise’: This will raise an exception if ties are
encountered to alert the user (Default).
- ‘random’: modal label ties Will be broken randomly.
- ‘tryself’: check if focal label breaks the tie between label
modes.  If the focal label does not break the modal tie, the
tie will be be broken randomly. If the focal unit has a
self-weight, focal label is not used to break any tie,
rather any tie will be broken randomly.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a></dt><dd><p>array of numeric|categorical values for the spatial lag</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aus</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;abs.australia_states_territories&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;STE_NAME21&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aus</span> <span class="o">=</span> <span class="n">aus</span><span class="p">[</span><span class="n">aus</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">notna</span><span class="p">()]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_contiguity</span><span class="p">(</span><span class="n">aus</span><span class="p">)</span>
</pre></div>
</div>
<p>Spatial lag operator for continuous variables.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span><span class="o">.</span><span class="n">lag</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">array([21.,  3.,  9., 13.,  9.,  0.,  9.,  0.,  0.])</span>
</pre></div>
</div>
<p>You can also perform transformation of weights.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity_r</span> <span class="o">=</span> <span class="n">contiguity</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity_r</span><span class="o">.</span><span class="n">lag</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">array([4.2, 1.5, 3. , 2.6, 4.5, 0. , 3. , 0. , 0. ])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="libpysal.graph.Graph.n">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">n</span></span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.n"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.n" title="Link to this definition">¶</a></dt>
<dd><p>Number of observations.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="libpysal.graph.Graph.n_components">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">n_components</span></span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.n_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.n_components" title="Link to this definition">¶</a></dt>
<dd><p>Get a number of connected components</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference external" href="https://docs.python.org/3.12/library/functions.html#int" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a></dt><dd><p>number of components</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="libpysal.graph.Graph.n_edges">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">n_edges</span></span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.n_edges"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.n_edges" title="Link to this definition">¶</a></dt>
<dd><p>Number of edges.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="libpysal.graph.Graph.n_nodes">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">n_nodes</span></span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.n_nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.n_nodes" title="Link to this definition">¶</a></dt>
<dd><p>Number of nodes.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="libpysal.graph.Graph.neighbors">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">neighbors</span></span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.neighbors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.neighbors" title="Link to this definition">¶</a></dt>
<dd><p>Get neighbors dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></dt><dd><p>dict of tuples representing neighbors</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>It is recommended to work directly with <a class="reference internal" href="#libpysal.graph.Graph.adjacency" title="libpysal.graph.Graph.adjacency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Graph.adjacency()</span></code></a> rather than
using the <a class="reference internal" href="#libpysal.graph.Graph.neighbors" title="libpysal.graph.Graph.neighbors"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Graph.neighbors()</span></code></a>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="libpysal.graph.Graph.nonzero">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nonzero</span></span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.nonzero"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.nonzero" title="Link to this definition">¶</a></dt>
<dd><p>Number of nonzero weights.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="libpysal.graph.Graph.pct_nonzero">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pct_nonzero</span></span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.pct_nonzero"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.pct_nonzero" title="Link to this definition">¶</a></dt>
<dd><p>Percentage of nonzero weights.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'k'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge_kws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_kws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focal_kws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_extent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.plot" title="Link to this definition">¶</a></dt>
<dd><p>Plot edges and nodes of the Graph</p>
<p>Creates a <code class="docutils literal notranslate"><span class="pre">maptlotlib</span></code> plot based on the topology stored in the
Graph and spatial location defined in <code class="docutils literal notranslate"><span class="pre">gdf</span></code>.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>gdf</strong><span class="classifier"><a class="reference external" href="https://geopandas.org/en/latest/docs/reference/api/geopandas.GeoDataFrame.html#geopandas.GeoDataFrame" title="(in GeoPandas v1.1.2.dev58.dev+gfd4ce6534)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code></a></span></dt><dd><p>Geometries indexed using the same index as Graph. Geometry types other than
points are converted to centroids encoding start and end point of Graph
edges.</p>
</dd>
<dt><strong>focal</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hashable</span></code> | <a class="reference external" href="https://numpy.org/doc/stable/glossary.html#term-array_like" title="(in NumPy v2.4)"><span>array_like</span></a>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">hashable</span></code>] | <a class="reference external" href="https://docs.python.org/3.12/library/constants.html#None" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">None</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>ID or an array-like of IDs of focal geometries whose weights shall be
plotted. If None, all weights from all focal geometries are plotted.
By default None</p>
</dd>
<dt><strong>nodes</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Plot nodes as points, by default True</p>
</dd>
<dt><strong>color</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>The color of all objects, by default “k”</p>
</dd>
<dt><strong>edge_kws</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Keyword arguments dictionary to send to <code class="docutils literal notranslate"><span class="pre">LineCollection</span></code>,
which provides fine-grained control over the aesthetics
of the edges in the plot. By default None</p>
</dd>
<dt><strong>node_kws</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Keyword arguments dictionary to send to <code class="docutils literal notranslate"><span class="pre">ax.scatter</span></code>,
which provides fine-grained control over the aesthetics
of the nodes in the plot. By default None</p>
</dd>
<dt><strong>focal_kws</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Keyword arguments dictionary to send to <code class="docutils literal notranslate"><span class="pre">ax.scatter</span></code>,
which provides fine-grained control over the aesthetics
of the focal nodes in the plot on top of generic <code class="docutils literal notranslate"><span class="pre">node_kws</span></code>.
Values of <code class="docutils literal notranslate"><span class="pre">node_kws</span></code> are updated from <code class="docutils literal notranslate"><span class="pre">focal_kws</span></code>.
Ignored if <code class="docutils literal notranslate"><span class="pre">focal=None</span></code>. By default None</p>
</dd>
<dt><strong>ax</strong><span class="classifier"><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.10.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>Axis on which to plot the weights. If None, a new figure and axis are
created. By default None</p>
</dd>
<dt><strong>figsize</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#tuple" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">tuple</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>figsize used to create a new axis. By default None</p>
</dd>
<dt><strong>limit_extent</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">optional</span></code></span></dt><dd><p>limit the extent of the axis to the extent of the plotted graph, by default
False</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.10.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code></a></dt><dd><p>Axis with the resulting plot</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If you’d like to overlay the actual geometries from the
<code class="docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code>, create an axis by plotting the <code class="docutils literal notranslate"><span class="pre">GeoDataFrame</span></code>
and plot the Graph on top.</p>
<blockquote>
<div><p>ax = gdf.plot()
gdf_graph.plot(gdf, ax=ax)</p>
</div></blockquote>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="libpysal.graph.Graph.sparse">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sparse</span></span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.sparse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.sparse" title="Link to this definition">¶</a></dt>
<dd><p>Return a scipy.sparse array (CSR)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">scipy.sparse.CSR</span></code></dt><dd><p>sparse representation of the adjacency</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.subgraph">
<span class="sig-name descname"><span class="pre">subgraph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.subgraph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.subgraph" title="Link to this definition">¶</a></dt>
<dd><p>Returns a subset of Graph containing only nodes specified in ids</p>
<p>The resulting subgraph contains only the nodes in <code class="docutils literal notranslate"><span class="pre">ids</span></code> and the edges
between them or zero-weight self-loops in case of isolates.</p>
<p>The order of <code class="docutils literal notranslate"><span class="pre">ids</span></code> reflects a new canonical order of the resulting
subgraph. This means <code class="docutils literal notranslate"><span class="pre">ids</span></code> should be equal to the index of the DataFrame
containing data linked to the graph to ensure alignment of sparse representation
of subgraph.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>ids</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/glossary.html#term-array_like" title="(in NumPy v2.4)"><span>array_like</span></a></span></dt><dd><p>An array of node IDs to be retained</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>A new Graph that is a subset of the original</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Unlike the implementation in <code class="docutils literal notranslate"><span class="pre">networkx</span></code>, this creates a copy since
Graphs in <code class="docutils literal notranslate"><span class="pre">libpysal</span></code> are immutable.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;nybb&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;BoroName&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span>
<span class="go">               BoroCode  ...                                           geometry</span>
<span class="go">BoroName                 ...</span>
<span class="go">Staten Island         5  ...  MULTIPOLYGON (((970217.022 145643.332, 970227....</span>
<span class="go">Queens                4  ...  MULTIPOLYGON (((1029606.077 156073.814, 102957...</span>
<span class="go">Brooklyn              3  ...  MULTIPOLYGON (((1021176.479 151374.797, 102100...</span>
<span class="go">Manhattan             1  ...  MULTIPOLYGON (((981219.056 188655.316, 980940....</span>
<span class="go">Bronx                 2  ...  MULTIPOLYGON (((1012821.806 229228.265, 101278...</span>
<span class="go">[5 rows x 4 columns]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_contiguity</span><span class="p">(</span><span class="n">nybb</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span><span class="o">.</span><span class="n">subgraph</span><span class="p">([</span><span class="s2">&quot;Queens&quot;</span><span class="p">,</span> <span class="s2">&quot;Brooklyn&quot;</span><span class="p">,</span> <span class="s2">&quot;Manhattan&quot;</span><span class="p">,</span> <span class="s2">&quot;Bronx&quot;</span><span class="p">])</span>
<span class="go">&lt;Graph of 4 nodes and 10 nonzero edges indexed by</span>
<span class="go"> [&#39;Queens&#39;, &#39;Brooklyn&#39;, &#39;Manhattan&#39;, &#39;Bronx&#39;]&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.summary">
<span class="sig-name descname"><span class="pre">summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">asymmetries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.summary" title="Link to this definition">¶</a></dt>
<dd><p>Summary of the Graph properties</p>
<p>Returns a <a class="reference internal" href="libpysal.graph.GraphSummary.html#libpysal.graph.GraphSummary" title="libpysal.graph.GraphSummary"><code class="xref py py-class docutils literal notranslate"><span class="pre">GraphSummary</span></code></a> object with the statistical attributes
summarising the Graph and its basic properties. See the docstring of the
<a class="reference internal" href="libpysal.graph.GraphSummary.html#libpysal.graph.GraphSummary" title="libpysal.graph.GraphSummary"><code class="xref py py-class docutils literal notranslate"><span class="pre">GraphSummary</span></code></a> for details and all the available attributes.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>asymmetries</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.12)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>whether to compute <code class="docutils literal notranslate"><span class="pre">n_asymmetries</span></code>, which is considerably more expensive
than the other attributes. By default False.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="libpysal.graph.GraphSummary.html#libpysal.graph.GraphSummary" title="libpysal.graph.GraphSummary"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GraphSummary</span></code></a></dt><dd><p>a class containing a summary statisitcs about the graph</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;nybb&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;BoroName&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span>
<span class="go">               BoroCode  ...                                           geometry</span>
<span class="go">BoroName                 ...</span>
<span class="go">Staten Island         5  ...  MULTIPOLYGON (((970217.022 145643.332, 970227....</span>
<span class="go">Queens                4  ...  MULTIPOLYGON (((1029606.077 156073.814, 102957...</span>
<span class="go">Brooklyn              3  ...  MULTIPOLYGON (((1021176.479 151374.797, 102100...</span>
<span class="go">Manhattan             1  ...  MULTIPOLYGON (((981219.056 188655.316, 980940....</span>
<span class="go">Bronx                 2  ...  MULTIPOLYGON (((1012821.806 229228.265, 101278...</span>
<span class="go">[5 rows x 4 columns]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_contiguity</span><span class="p">(</span><span class="n">nybb</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span>
<span class="go">&lt;Graph of 5 nodes and 10 nonzero edges indexed by</span>
<span class="go"> [&#39;Staten Island&#39;, &#39;Queens&#39;, &#39;Brooklyn&#39;, &#39;Manhattan&#39;, &#39;Bronx&#39;]&gt;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span> <span class="o">=</span> <span class="n">contiguity</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">asymmetries</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span>
<span class="go">Graph Summary Statistics</span>
<span class="go">========================</span>
<span class="go">Graph indexed by:</span>
<span class="go">[&#39;Staten Island&#39;, &#39;Queens&#39;, &#39;Brooklyn&#39;, &#39;Manhattan&#39;, &#39;Bronx&#39;]</span>
<span class="go">==============================================================</span>
<span class="go">Number of nodes:                                             5</span>
<span class="go">Number of edges:                                            10</span>
<span class="go">Number of connected components:                              2</span>
<span class="go">Number of isolates:                                          1</span>
<span class="go">Number of non-zero edges:                                   10</span>
<span class="go">Percentage of non-zero edges:                           44.00%</span>
<span class="go">Number of asymmetries:                                       0</span>
<span class="go">--------------------------------------------------------------</span>
<span class="go">Cardinalities</span>
<span class="go">==============================================================</span>
<span class="go">Mean:                       2    25%:                        2</span>
<span class="go">Standard deviation:         1    50%:                        2</span>
<span class="go">Min:                        0    75%:                        3</span>
<span class="go">Max:                        3</span>
<span class="go">--------------------------------------------------------------</span>
<span class="go">Weights</span>
<span class="go">==============================================================</span>
<span class="go">Mean:                       1    25%:                        1</span>
<span class="go">Standard deviation:         0    50%:                        1</span>
<span class="go">Min:                        0    75%:                        1</span>
<span class="go">Max:                        1</span>
<span class="go">--------------------------------------------------------------</span>
<span class="go">Sum of weights</span>
<span class="go">==============================================================</span>
<span class="go">S0:                                                         10</span>
<span class="go">S1:                                                         20</span>
<span class="go">S2:                                                        104</span>
<span class="go">--------------------------------------------------------------</span>
<span class="go">Traces</span>
<span class="go">==============================================================</span>
<span class="go">GG:                                                         10</span>
<span class="go">G&#39;G:                                                        10</span>
<span class="go">G&#39;G + GG:                                                   20</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span><span class="o">.</span><span class="n">s1</span>
<span class="go">20</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.to_W">
<span class="sig-name descname"><span class="pre">to_W</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.to_W"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.to_W" title="Link to this definition">¶</a></dt>
<dd><p>Convert Graph to a libpysal.weights.W object</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference internal" href="libpysal.weights.W.html#libpysal.weights.W" title="libpysal.weights.W"><code class="xref py py-obj docutils literal notranslate"><span class="pre">libpysal.weights.W</span></code></a></dt><dd><p>representation of graph as a weights.W object</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;nybb&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;BoroName&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span>
<span class="go">               BoroCode  ...                                           geometry</span>
<span class="go">BoroName                 ...</span>
<span class="go">Staten Island         5  ...  MULTIPOLYGON (((970217.022 145643.332, 970227....</span>
<span class="go">Queens                4  ...  MULTIPOLYGON (((1029606.077 156073.814, 102957...</span>
<span class="go">Brooklyn              3  ...  MULTIPOLYGON (((1021176.479 151374.797, 102100...</span>
<span class="go">Manhattan             1  ...  MULTIPOLYGON (((981219.056 188655.316, 980940....</span>
<span class="go">Bronx                 2  ...  MULTIPOLYGON (((1012821.806 229228.265, 101278...</span>
<span class="go">[5 rows x 4 columns]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_contiguity</span><span class="p">(</span><span class="n">nybb</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span><span class="o">.</span><span class="n">adjacency</span>
<span class="go">focal          neighbor</span>
<span class="go">Staten Island  Staten Island    0</span>
<span class="go">Queens         Brooklyn         1</span>
<span class="go">               Manhattan        1</span>
<span class="go">               Bronx            1</span>
<span class="go">Brooklyn       Queens           1</span>
<span class="go">               Manhattan        1</span>
<span class="go">Manhattan      Queens           1</span>
<span class="go">               Brooklyn         1</span>
<span class="go">               Bronx            1</span>
<span class="go">Bronx          Queens           1</span>
<span class="go">               Manhattan        1</span>
<span class="go">Name: weight, dtype: int64</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">contiguity</span><span class="o">.</span><span class="n">to_W</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">neighbors</span>
<span class="go">{&#39;Bronx&#39;: [&#39;Queens&#39;, &#39;Manhattan&#39;],</span>
<span class="go"> &#39;Brooklyn&#39;: [&#39;Queens&#39;, &#39;Manhattan&#39;],</span>
<span class="go"> &#39;Manhattan&#39;: [&#39;Queens&#39;, &#39;Brooklyn&#39;, &#39;Bronx&#39;],</span>
<span class="go"> &#39;Queens&#39;: [&#39;Brooklyn&#39;, &#39;Manhattan&#39;, &#39;Bronx&#39;],</span>
<span class="go"> &#39;Staten Island&#39;: []}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.to_gal">
<span class="sig-name descname"><span class="pre">to_gal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.to_gal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.to_gal" title="Link to this definition">¶</a></dt>
<dd><p>Save Graph to a GAL file</p>
<p>Graph is serialized to the GAL file format.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>path</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a></span></dt><dd><p>path to the GAL file</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="libpysal.graph.read_gal.html#libpysal.graph.read_gal" title="libpysal.graph.read_gal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_gal</span></code></a></dt><dd></dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;nybb&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;BoroName&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span>
<span class="go">               BoroCode  ...                                           geometry</span>
<span class="go">BoroName                 ...</span>
<span class="go">Staten Island         5  ...  MULTIPOLYGON (((970217.022 145643.332, 970227....</span>
<span class="go">Queens                4  ...  MULTIPOLYGON (((1029606.077 156073.814, 102957...</span>
<span class="go">Brooklyn              3  ...  MULTIPOLYGON (((1021176.479 151374.797, 102100...</span>
<span class="go">Manhattan             1  ...  MULTIPOLYGON (((981219.056 188655.316, 980940....</span>
<span class="go">Bronx                 2  ...  MULTIPOLYGON (((1012821.806 229228.265, 101278...</span>
<span class="go">[5 rows x 4 columns]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_contiguity</span><span class="p">(</span><span class="n">nybb</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span><span class="o">.</span><span class="n">to_gal</span><span class="p">(</span><span class="s2">&quot;contiguity.gal&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.to_gwt">
<span class="sig-name descname"><span class="pre">to_gwt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.to_gwt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.to_gwt" title="Link to this definition">¶</a></dt>
<dd><p>Save Graph to a GWT file</p>
<p>Graph is serialized to the GWT file format.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>path</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a></span></dt><dd><p>path to the GWT file</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="libpysal.graph.read_gwt.html#libpysal.graph.read_gwt" title="libpysal.graph.read_gwt"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_gwt</span></code></a></dt><dd></dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;nybb&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;BoroName&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span>
<span class="go">               BoroCode  ...                                           geometry</span>
<span class="go">BoroName                 ...</span>
<span class="go">Staten Island         5  ...  MULTIPOLYGON (((970217.022 145643.332, 970227....</span>
<span class="go">Queens                4  ...  MULTIPOLYGON (((1029606.077 156073.814, 102957...</span>
<span class="go">Brooklyn              3  ...  MULTIPOLYGON (((1021176.479 151374.797, 102100...</span>
<span class="go">Manhattan             1  ...  MULTIPOLYGON (((981219.056 188655.316, 980940....</span>
<span class="go">Bronx                 2  ...  MULTIPOLYGON (((1012821.806 229228.265, 101278...</span>
<span class="go">[5 rows x 4 columns]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_contiguity</span><span class="p">(</span><span class="n">nybb</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span><span class="o">.</span><span class="n">to_gwt</span><span class="p">(</span><span class="s2">&quot;contiguity.gwt&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.to_networkx">
<span class="sig-name descname"><span class="pre">to_networkx</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.to_networkx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.to_networkx" title="Link to this definition">¶</a></dt>
<dd><p>Convert Graph to a <code class="docutils literal notranslate"><span class="pre">networkx</span></code> graph.</p>
<p>If Graph is symmetric, returns <code class="docutils literal notranslate"><span class="pre">nx.Graph</span></code>, otherwise returns a <code class="docutils literal notranslate"><span class="pre">nx.DiGraph</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference external" href="https://networkx.org/documentation/stable/reference/classes/graph.html#networkx.Graph" title="(in NetworkX v3.6.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">networkx.Graph</span></code></a> | <a class="reference external" href="https://networkx.org/documentation/stable/reference/classes/digraph.html#networkx.DiGraph" title="(in NetworkX v3.6.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">networkx.DiGraph</span></code></a></dt><dd><p>Representation of libpysal Graph as networkx graph</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;nybb&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;BoroName&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span>
<span class="go">               BoroCode  ...                                           geometry</span>
<span class="go">BoroName                 ...</span>
<span class="go">Staten Island         5  ...  MULTIPOLYGON (((970217.022 145643.332, 970227....</span>
<span class="go">Queens                4  ...  MULTIPOLYGON (((1029606.077 156073.814, 102957...</span>
<span class="go">Brooklyn              3  ...  MULTIPOLYGON (((1021176.479 151374.797, 102100...</span>
<span class="go">Manhattan             1  ...  MULTIPOLYGON (((981219.056 188655.316, 980940....</span>
<span class="go">Bronx                 2  ...  MULTIPOLYGON (((1012821.806 229228.265, 101278...</span>
<span class="go">[5 rows x 4 columns]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_contiguity</span><span class="p">(</span><span class="n">nybb</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nx_graph</span> <span class="o">=</span> <span class="n">contiguity</span><span class="o">.</span><span class="n">to_networkx</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.to_parquet">
<span class="sig-name descname"><span class="pre">to_parquet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.to_parquet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.to_parquet" title="Link to this definition">¶</a></dt>
<dd><p>Save Graph to a Apache Parquet</p>
<p>Graph is serialized to the Apache Parquet using the underlying adjacency
object stored as a Parquet table and custom metadata containing transformation.</p>
<p>Requires pyarrow package.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>path</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a> | <code class="xref py py-obj docutils literal notranslate"><span class="pre">pyarrow.NativeFile</span></code></span></dt><dd><p>path or any stream supported by pyarrow</p>
</dd>
<dt><strong>**kwargs</strong></dt><dd><p>additional keyword arguments passed to pyarrow.parquet.write_table</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="libpysal.graph.read_parquet.html#libpysal.graph.read_parquet" title="libpysal.graph.read_parquet"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_parquet</span></code></a></dt><dd></dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">geodatasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;nybb&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;BoroName&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nybb</span>
<span class="go">               BoroCode  ...                                           geometry</span>
<span class="go">BoroName                 ...</span>
<span class="go">Staten Island         5  ...  MULTIPOLYGON (((970217.022 145643.332, 970227....</span>
<span class="go">Queens                4  ...  MULTIPOLYGON (((1029606.077 156073.814, 102957...</span>
<span class="go">Brooklyn              3  ...  MULTIPOLYGON (((1021176.479 151374.797, 102100...</span>
<span class="go">Manhattan             1  ...  MULTIPOLYGON (((981219.056 188655.316, 980940....</span>
<span class="go">Bronx                 2  ...  MULTIPOLYGON (((1012821.806 229228.265, 101278...</span>
<span class="go">[5 rows x 4 columns]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">build_contiguity</span><span class="p">(</span><span class="n">nybb</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contiguity</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s2">&quot;contiguity.parquet&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="libpysal.graph.Graph.transform">
<span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transformation</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.transform" title="Link to this definition">¶</a></dt>
<dd><p>Transformation of weights</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>transformation</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#str" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a> | <a class="reference external" href="https://docs.python.org/3.12/library/functions.html#callable" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">callable()</span></code></a></span></dt><dd><p>Transformation method. The following are
valid transformations.</p>
<ul class="simple">
<li><p><strong>B</strong> – Binary</p></li>
<li><p><strong>R</strong> – Row-standardization (global sum <span class="math notranslate nohighlight">\(=n\)</span>)</p></li>
<li><p><strong>D</strong> – Double-standardization (global sum <span class="math notranslate nohighlight">\(=1\)</span>)</p></li>
<li><p><strong>V</strong> – Variance stabilizing</p></li>
</ul>
<p>Alternatively, you can pass your own callable passed to
<code class="docutils literal notranslate"><span class="pre">self.adjacency.groupby(level=0).transform()</span></code>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#libpysal.graph.Graph" title="libpysal.graph.Graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Graph</span></code></a></dt><dd><p>transformed weights</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference external" href="https://docs.python.org/3.12/library/exceptions.html#ValueError" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ValueError</span></code></a></dt><dd><p>Value error for unsupported transformation</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="libpysal.graph.Graph.unique_ids">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unique_ids</span></span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.unique_ids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.unique_ids" title="Link to this definition">¶</a></dt>
<dd><p>Unique IDs used in the Graph</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="libpysal.graph.Graph.weights">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">weights</span></span><a class="reference internal" href="../_modules/libpysal/graph/base.html#Graph.weights"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#libpysal.graph.Graph.weights" title="Link to this definition">¶</a></dt>
<dd><p>Get weights dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference external" href="https://docs.python.org/3.12/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></dt><dd><p>dict of tuples representing weights</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>It is recommended to work directly with <a class="reference internal" href="#libpysal.graph.Graph.adjacency" title="libpysal.graph.Graph.adjacency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Graph.adjacency()</span></code></a> rather than
using the <a class="reference internal" href="#libpysal.graph.Graph.weights" title="libpysal.graph.Graph.weights"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Graph.weights()</span></code></a>.</p>
</dd></dl>

</dd></dl>

</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/generated/libpysal.graph.Graph.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2018-, pysal developers.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 8.2.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>